<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A programming framework for agentic AI"><meta name=author content="Chi Wang & Qingyun Wu"><link href=http://docs.ag2.ai/latest/docs/user-guide/models/amazon-bedrock/ rel=canonical><link href=../../advanced-concepts/llm-configuration-deep-dive/ rel=prev><link href=../anthropic/ rel=next><link rel=icon href=../../../../assets/img/favicon.svg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.7"><title>Amazon Bedrock - AG2</title><link rel=stylesheet href=../../../../assets/stylesheets/main.8608ea7d.min.css><link rel=stylesheet href=../../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../css/timeago.css><link rel=stylesheet href=../../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../../stylesheets/extra.aa8cf5.min.css><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-2GN2KN2CE4"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-2GN2KN2CE4",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-2GN2KN2CE4",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><meta http-equiv=Cache-Control content="no-cache, no-store, must-revalidate"><meta property=og:type content=website><meta property=og:title content="AG2 - Amazon Bedrock"><meta property=og:description content="A programming framework for agentic AI"><meta content=http://docs.ag2.ai/latest/docs/user-guide/models/amazon-bedrock/ property=og:url><meta property=og:image content=https://opengraph.githubassets.com/1671805243.560327/ag2ai/ag2><meta property=og:image:type content=image/png><meta property=og:image:width content=1200><meta property=og:image:height content=630><meta name=twitter:card content=summary_large_image><meta name=twitter:title content="AG2 - Amazon Bedrock"><meta name=twitter:description content="A programming framework for agentic AI"><meta name=twitter:image content=https://opengraph.githubassets.com/1671805243.560327/ag2ai/ag2><link href=../../../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style><script src=../../../../assets/javascripts/glightbox.min.js></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#model-features-support class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> You're viewing the <strong class=primary-text>work in progress</strong> version of the documentation. Please click <a rel=me href=http://docs.ag2.ai><strong>here</strong></a> for the latest. </div> </aside> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> <div class="md-banner__inner md-grid md-typeset"> You're not viewing the latest version. <a href=../../../../..> <strong>Click here to go to latest.</strong> </a> </div> <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../../../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script> </aside> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../.. title=AG2 class="md-header__button md-logo" aria-label=AG2 data-md-component=logo> <img src=../../../../assets/img/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> AG2 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Amazon Bedrock </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=custom data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ag2ai/ag2 title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> ag2ai/ag2 </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../.. class=md-tabs__link> Home </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../basic-concepts/installing-ag2/ class=md-tabs__link> User Guide </a> </li> <li class=md-tabs__item> <a href=../../../api-reference/autogen/AfterWork/ class=md-tabs__link> API References </a> </li> <li class=md-tabs__item> <a href=../../../contributor-guide/contributing/ class=md-tabs__link> Contributor Guide </a> </li> <li class=md-tabs__item> <a href=../../../faq/FAQ/ class=md-tabs__link> FAQs </a> </li> <li class=md-tabs__item> <a href=../../../ecosystem/agentops/ class=md-tabs__link> Ecosystem </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../.. title=AG2 class="md-nav__button md-logo" aria-label=AG2 data-md-component=logo> <img src=../../../../assets/img/logo.svg alt=logo> </a> AG2 </label> <div class=md-nav__source> <a href=https://github.com/ag2ai/ag2 title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> ag2ai/ag2 </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../.. class=md-nav__link> <span class=md-ellipsis> Home </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> User Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> User Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../basic-concepts/installing-ag2/ class=md-nav__link> <span class=md-ellipsis> Basic Concepts </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../advanced-concepts/rag/ class=md-nav__link> <span class=md-ellipsis> Advanced Concepts </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3 checked> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class=md-ellipsis> Model Providers </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=true> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Model Providers </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Amazon Bedrock </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Amazon Bedrock </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#model-features-support class=md-nav__link> <span class=md-ellipsis> Model features / support </span> </a> </li> <li class=md-nav__item> <a href=#requirements class=md-nav__link> <span class=md-ellipsis> Requirements </span> </a> </li> <li class=md-nav__item> <a href=#pricing class=md-nav__link> <span class=md-ellipsis> Pricing </span> </a> </li> <li class=md-nav__item> <a href=#if-you-need-to-install-ag2-with-amazon-bedrock class=md-nav__link> <span class=md-ellipsis> If you need to install AG2 with Amazon Bedrock </span> </a> <nav class=md-nav aria-label="If you need to install AG2 with Amazon Bedrock"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#set-the-config-for-amazon-bedrock class=md-nav__link> <span class=md-ellipsis> Set the config for Amazon Bedrock </span> </a> </li> <li class=md-nav__item> <a href=#using-within-an-aws-lambda-function class=md-nav__link> <span class=md-ellipsis> Using within an AWS Lambda function </span> </a> </li> <li class=md-nav__item> <a href=#two-agent-coding-example class=md-nav__link> <span class=md-ellipsis> Two-agent Coding Example </span> </a> <nav class=md-nav aria-label="Two-agent Coding Example"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configuration class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#tool-call-example class=md-nav__link> <span class=md-ellipsis> Tool Call Example </span> </a> </li> <li class=md-nav__item> <a href=#group-chat-example-with-anthropics-claude-3-sonnet-mistrals-large-2-and-metas-llama-31-70b class=md-nav__link> <span class=md-ellipsis> Group Chat Example with Anthropic's Claude 3 Sonnet, Mistral's Large 2, and Meta's Llama 3.1 70B </span> </a> </li> <li class=md-nav__item> <a href=#image-classification-with-anthropics-claude-3-sonnet class=md-nav__link> <span class=md-ellipsis> Image classification with Anthropic's Claude 3 Sonnet </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../anthropic/ class=md-nav__link> <span class=md-ellipsis> Anthropic </span> </a> </li> <li class=md-nav__item> <a href=../cerebras/ class=md-nav__link> <span class=md-ellipsis> Cerebras </span> </a> </li> <li class=md-nav__item> <a href=../cohere/ class=md-nav__link> <span class=md-ellipsis> Cohere </span> </a> </li> <li class=md-nav__item> <a href=../deepseek-v3/ class=md-nav__link> <span class=md-ellipsis> Deepseek V3 </span> </a> </li> <li class=md-nav__item> <a href=../google-gemini/ class=md-nav__link> <span class=md-ellipsis> Google Gemini </span> </a> </li> <li class=md-nav__item> <a href=../google-vertexai/ class=md-nav__link> <span class=md-ellipsis> Google Vertexai </span> </a> </li> <li class=md-nav__item> <a href=../groq/ class=md-nav__link> <span class=md-ellipsis> Groq </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../litellm-proxy-server/installation/ class=md-nav__link> <span class=md-ellipsis> LiteLLM Proxy Server </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../lm-studio/ class=md-nav__link> <span class=md-ellipsis> Lm Studio </span> </a> </li> <li class=md-nav__item> <a href=../mistralai/ class=md-nav__link> <span class=md-ellipsis> Mistralai </span> </a> </li> <li class=md-nav__item> <a href=../ollama/ class=md-nav__link> <span class=md-ellipsis> Ollama </span> </a> </li> <li class=md-nav__item> <a href=../openai/ class=md-nav__link> <span class=md-ellipsis> Openai </span> </a> </li> <li class=md-nav__item> <a href=../togetherai/ class=md-nav__link> <span class=md-ellipsis> Togetherai </span> </a> </li> <li class=md-nav__item> <a href=../vLLM/ class=md-nav__link> <span class=md-ellipsis> Vllm </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../reference-agents/ class=md-nav__link> <span class=md-ellipsis> Reference Agents </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../reference-tools/ class=md-nav__link> <span class=md-ellipsis> Reference Tools </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../api-reference/autogen/AfterWork/ class=md-nav__link> <span class=md-ellipsis> API References </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../contributor-guide/contributing/ class=md-nav__link> <span class=md-ellipsis> Contributor Guide </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../faq/FAQ/ class=md-nav__link> <span class=md-ellipsis> FAQs </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../ecosystem/agentops/ class=md-nav__link> <span class=md-ellipsis> Ecosystem </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#model-features-support class=md-nav__link> <span class=md-ellipsis> Model features / support </span> </a> </li> <li class=md-nav__item> <a href=#requirements class=md-nav__link> <span class=md-ellipsis> Requirements </span> </a> </li> <li class=md-nav__item> <a href=#pricing class=md-nav__link> <span class=md-ellipsis> Pricing </span> </a> </li> <li class=md-nav__item> <a href=#if-you-need-to-install-ag2-with-amazon-bedrock class=md-nav__link> <span class=md-ellipsis> If you need to install AG2 with Amazon Bedrock </span> </a> <nav class=md-nav aria-label="If you need to install AG2 with Amazon Bedrock"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#set-the-config-for-amazon-bedrock class=md-nav__link> <span class=md-ellipsis> Set the config for Amazon Bedrock </span> </a> </li> <li class=md-nav__item> <a href=#using-within-an-aws-lambda-function class=md-nav__link> <span class=md-ellipsis> Using within an AWS Lambda function </span> </a> </li> <li class=md-nav__item> <a href=#two-agent-coding-example class=md-nav__link> <span class=md-ellipsis> Two-agent Coding Example </span> </a> <nav class=md-nav aria-label="Two-agent Coding Example"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configuration class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#tool-call-example class=md-nav__link> <span class=md-ellipsis> Tool Call Example </span> </a> </li> <li class=md-nav__item> <a href=#group-chat-example-with-anthropics-claude-3-sonnet-mistrals-large-2-and-metas-llama-31-70b class=md-nav__link> <span class=md-ellipsis> Group Chat Example with Anthropic's Claude 3 Sonnet, Mistral's Large 2, and Meta's Llama 3.1 70B </span> </a> </li> <li class=md-nav__item> <a href=#image-classification-with-anthropics-claude-3-sonnet class=md-nav__link> <span class=md-ellipsis> Image classification with Anthropic's Claude 3 Sonnet </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/ag2ai/ag2/website/mkdocs/docs/docs/user-guide/models/amazon-bedrock.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m7 14.94 6.06-6.06 2.06 2.06L9.06 17H7zM12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m4.7-10.65-1 1-2.05-2.05 1-1c.21-.22.56-.22.77 0l1.28 1.28c.22.21.22.56 0 .77M12 2a10 10 0 0 1 10 10 10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2"/></svg> </a> <p>AG2 allows you to use Amazon's generative AI Bedrock service to run inference with a number of open-weight models and as well as their own models.</p> <p>Amazon Bedrock supports models from providers such as Meta, Anthropic, Cohere, and Mistral.</p> <p>In this notebook, we demonstrate how to use Anthropic's Sonnet model for AgentChat in AG2.</p> <h2 id=model-features-support>Model features / support<a class=headerlink href=#model-features-support title="Permanent link">#</a></h2> <p>Amazon Bedrock supports a wide range of models, not only for text generation but also for image classification and generation. Not all features are supported by AG2 or by the Converse API used. Please see <a href=https://docs.aws.amazon.com/bedrock/latest/userguide/conversation-inference-supported-models-features.html>Amazon's documentation</a> on the features supported by the Converse API.</p> <p>At this point in time AG2 supports text generation and image classification (passing images to the LLM).</p> <h2 id=requirements>Requirements<a class=headerlink href=#requirements title="Permanent link">#</a></h2> <p>To use Amazon Bedrock with AG2, first you need to install the <code>ag2[bedrock]</code> package.</p> <h2 id=pricing>Pricing<a class=headerlink href=#pricing title="Permanent link">#</a></h2> <p>When we combine the number of models supported and costs being on a per-region basis, it's not feasible to maintain the costs for each model+region combination within the AG2 implementation. Therefore, it's recommended that you add the following to your config with cost per 1,000 input and output tokens, respectively: <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>{
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    ...
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>    &quot;price&quot;: [0.003, 0.015]
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>    ...
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>}
</code></pre></div></p> <p>Amazon Bedrock pricing is available <a href=https://aws.amazon.com/bedrock/pricing/ >here</a>.</p> <h1 id=if-you-need-to-install-ag2-with-amazon-bedrock>If you need to install AG2 with Amazon Bedrock<a class=headerlink href=#if-you-need-to-install-ag2-with-amazon-bedrock title="Permanent link">#</a></h1> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>pip<span class=w> </span>install<span class=w> </span>ag2<span class=o>[</span>bedrock<span class=o>]</span>
</code></pre></div> <h2 id=set-the-config-for-amazon-bedrock>Set the config for Amazon Bedrock<a class=headerlink href=#set-the-config-for-amazon-bedrock title="Permanent link">#</a></h2> <p>Amazon's Bedrock does not use the <code>api_key</code> as per other cloud inference providers for authentication, instead it uses a number of access, token, and profile values. These fields will need to be added to your client configuration. Please check the Amazon Bedrock documentation to determine which ones you will need to add.</p> <p>The available parameters are:</p> <ul> <li>aws_region (mandatory)</li> <li>aws_access_key (or environment variable: AWS_ACCESS_KEY)</li> <li>aws_secret_key (or environment variable: AWS_SECRET_KEY)</li> <li>aws_session_token (or environment variable: AWS_SESSION_TOKEN)</li> <li>aws_profile_name</li> </ul> <p>Beyond the authentication credentials, the only mandatory parameters are <code>api_type</code> and <code>model</code>.</p> <p>The following parameters are common across all models used:</p> <ul> <li>temperature</li> <li>topP</li> <li>maxTokens</li> </ul> <p>You can also include parameters specific to the model you are using (see the model detail within Amazon's documentation for more information), the four supported additional parameters are:</p> <ul> <li>top_p</li> <li>top_k</li> <li>k</li> <li>seed</li> </ul> <p>An additional parameter can be added that denotes whether the model supports a system prompt (which is where the system messages are not included in the message list, but in a separate parameter). This defaults to <code>True</code>, so set it to <code>False</code> if your model (for example Mistral's Instruct models) <a href=https://docs.aws.amazon.com/bedrock/latest/userguide/conversation-inference-supported-models-features.html>doesn't support this feature</a>:</p> <ul> <li>supports_system_prompts</li> </ul> <p>It is important to add the <code>api_type</code> field and set it to a string that corresponds to the client type used: <code>bedrock</code>.</p> <p>Example: <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>[
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>    {
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a>        &quot;api_type&quot;: &quot;bedrock&quot;,
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a>        &quot;model&quot;: &quot;amazon.titan-text-premier-v1:0&quot;,
<a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>        &quot;aws_region&quot;: &quot;us-east-1&quot;
<a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a>        &quot;aws_access_key&quot;: &quot;&quot;,
<a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a>        &quot;aws_secret_key&quot;: &quot;&quot;,
<a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a>        &quot;aws_session_token&quot;: &quot;&quot;,
<a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a>        &quot;aws_profile_name&quot;: &quot;&quot;,
<a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a>    },
<a id=__codelineno-2-11 name=__codelineno-2-11 href=#__codelineno-2-11></a>    {
<a id=__codelineno-2-12 name=__codelineno-2-12 href=#__codelineno-2-12></a>        &quot;api_type&quot;: &quot;bedrock&quot;,
<a id=__codelineno-2-13 name=__codelineno-2-13 href=#__codelineno-2-13></a>        &quot;model&quot;: &quot;anthropic.claude-3-sonnet-20240229-v1:0&quot;,
<a id=__codelineno-2-14 name=__codelineno-2-14 href=#__codelineno-2-14></a>        &quot;aws_region&quot;: &quot;us-east-1&quot;
<a id=__codelineno-2-15 name=__codelineno-2-15 href=#__codelineno-2-15></a>        &quot;aws_access_key&quot;: &quot;&quot;,
<a id=__codelineno-2-16 name=__codelineno-2-16 href=#__codelineno-2-16></a>        &quot;aws_secret_key&quot;: &quot;&quot;,
<a id=__codelineno-2-17 name=__codelineno-2-17 href=#__codelineno-2-17></a>        &quot;aws_session_token&quot;: &quot;&quot;,
<a id=__codelineno-2-18 name=__codelineno-2-18 href=#__codelineno-2-18></a>        &quot;aws_profile_name&quot;: &quot;&quot;,
<a id=__codelineno-2-19 name=__codelineno-2-19 href=#__codelineno-2-19></a>        &quot;temperature&quot;: 0.5,
<a id=__codelineno-2-20 name=__codelineno-2-20 href=#__codelineno-2-20></a>        &quot;topP&quot;: 0.2,
<a id=__codelineno-2-21 name=__codelineno-2-21 href=#__codelineno-2-21></a>        &quot;maxTokens&quot;: 250,
<a id=__codelineno-2-22 name=__codelineno-2-22 href=#__codelineno-2-22></a>    },
<a id=__codelineno-2-23 name=__codelineno-2-23 href=#__codelineno-2-23></a>    {
<a id=__codelineno-2-24 name=__codelineno-2-24 href=#__codelineno-2-24></a>        &quot;api_type&quot;: &quot;bedrock&quot;,
<a id=__codelineno-2-25 name=__codelineno-2-25 href=#__codelineno-2-25></a>        &quot;model&quot;: &quot;mistral.mixtral-8x7b-instruct-v0:1&quot;,
<a id=__codelineno-2-26 name=__codelineno-2-26 href=#__codelineno-2-26></a>        &quot;aws_region&quot;: &quot;us-east-1&quot;
<a id=__codelineno-2-27 name=__codelineno-2-27 href=#__codelineno-2-27></a>        &quot;aws_access_key&quot;: &quot;&quot;,
<a id=__codelineno-2-28 name=__codelineno-2-28 href=#__codelineno-2-28></a>        &quot;aws_secret_key&quot;: &quot;&quot;,
<a id=__codelineno-2-29 name=__codelineno-2-29 href=#__codelineno-2-29></a>        &quot;supports_system_prompts&quot;: False, # Mistral Instruct models don&#39;t support a separate system prompt
<a id=__codelineno-2-30 name=__codelineno-2-30 href=#__codelineno-2-30></a>        &quot;price&quot;: [0.00045, 0.0007] # Specific pricing for this model/region
<a id=__codelineno-2-31 name=__codelineno-2-31 href=#__codelineno-2-31></a>    }
<a id=__codelineno-2-32 name=__codelineno-2-32 href=#__codelineno-2-32></a>]
</code></pre></div></p> <h2 id=using-within-an-aws-lambda-function>Using within an AWS Lambda function<a class=headerlink href=#using-within-an-aws-lambda-function title="Permanent link">#</a></h2> <p>If you are using your AG2 code within an AWS Lambda function, you can utilise the attached role to access the Bedrock service and do not need to provide access, token, or profile values.</p> <h2 id=two-agent-coding-example>Two-agent Coding Example<a class=headerlink href=#two-agent-coding-example title="Permanent link">#</a></h2> <h3 id=configuration>Configuration<a class=headerlink href=#configuration title="Permanent link">#</a></h3> <p>Start with our configuration - we'll use Anthropic's Sonnet model and put in recent pricing. Additionally, we'll reduce the temperature to 0.1 so its responses are less varied.</p> <p>Then we'll construct a simple conversation between a User proxy and an ConversableAgent, which uses the Sonnet model.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=kn>from</span><span class=w> </span><span class=nn>typing_extensions</span><span class=w> </span><span class=kn>import</span> <span class=n>Annotated</span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=kn>import</span><span class=w> </span><span class=nn>autogen</span>
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a>
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=n>config_list_bedrock</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a>    <span class=p>{</span>
<a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a>        <span class=s2>&quot;api_type&quot;</span><span class=p>:</span> <span class=s2>&quot;bedrock&quot;</span><span class=p>,</span>
<a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a>        <span class=s2>&quot;model&quot;</span><span class=p>:</span> <span class=s2>&quot;anthropic.claude-3-sonnet-20240229-v1:0&quot;</span><span class=p>,</span>
<a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a>        <span class=s2>&quot;aws_region&quot;</span><span class=p>:</span> <span class=s2>&quot;us-east-1&quot;</span><span class=p>,</span>
<a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a>        <span class=s2>&quot;aws_access_key&quot;</span><span class=p>:</span> <span class=s2>&quot;[FILL THIS IN]&quot;</span><span class=p>,</span>
<a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a>        <span class=s2>&quot;aws_secret_key&quot;</span><span class=p>:</span> <span class=s2>&quot;[FILL THIS IN]&quot;</span><span class=p>,</span>
<a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a>        <span class=s2>&quot;price&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mf>0.003</span><span class=p>,</span> <span class=mf>0.015</span><span class=p>],</span>
<a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a>        <span class=s2>&quot;temperature&quot;</span><span class=p>:</span> <span class=mf>0.1</span><span class=p>,</span>
<a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a>        <span class=s2>&quot;cache_seed&quot;</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>  <span class=c1># turn off caching</span>
<a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a>    <span class=p>}</span>
<a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a><span class=p>]</span>
<a id=__codelineno-3-17 name=__codelineno-3-17 href=#__codelineno-3-17></a>
<a id=__codelineno-3-18 name=__codelineno-3-18 href=#__codelineno-3-18></a><span class=n>assistant</span> <span class=o>=</span> <span class=n>autogen</span><span class=o>.</span><span class=n>AssistantAgent</span><span class=p>(</span>
<a id=__codelineno-3-19 name=__codelineno-3-19 href=#__codelineno-3-19></a>    <span class=s2>&quot;assistant&quot;</span><span class=p>,</span>
<a id=__codelineno-3-20 name=__codelineno-3-20 href=#__codelineno-3-20></a>    <span class=n>llm_config</span><span class=o>=</span><span class=p>{</span>
<a id=__codelineno-3-21 name=__codelineno-3-21 href=#__codelineno-3-21></a>        <span class=s2>&quot;config_list&quot;</span><span class=p>:</span> <span class=n>config_list_bedrock</span><span class=p>,</span>
<a id=__codelineno-3-22 name=__codelineno-3-22 href=#__codelineno-3-22></a>    <span class=p>},</span>
<a id=__codelineno-3-23 name=__codelineno-3-23 href=#__codelineno-3-23></a><span class=p>)</span>
<a id=__codelineno-3-24 name=__codelineno-3-24 href=#__codelineno-3-24></a>
<a id=__codelineno-3-25 name=__codelineno-3-25 href=#__codelineno-3-25></a><span class=n>user_proxy</span> <span class=o>=</span> <span class=n>autogen</span><span class=o>.</span><span class=n>UserProxyAgent</span><span class=p>(</span>
<a id=__codelineno-3-26 name=__codelineno-3-26 href=#__codelineno-3-26></a>    <span class=s2>&quot;user_proxy&quot;</span><span class=p>,</span>
<a id=__codelineno-3-27 name=__codelineno-3-27 href=#__codelineno-3-27></a>    <span class=n>human_input_mode</span><span class=o>=</span><span class=s2>&quot;NEVER&quot;</span><span class=p>,</span>
<a id=__codelineno-3-28 name=__codelineno-3-28 href=#__codelineno-3-28></a>    <span class=n>code_execution_config</span><span class=o>=</span><span class=p>{</span>
<a id=__codelineno-3-29 name=__codelineno-3-29 href=#__codelineno-3-29></a>        <span class=s2>&quot;work_dir&quot;</span><span class=p>:</span> <span class=s2>&quot;coding&quot;</span><span class=p>,</span>
<a id=__codelineno-3-30 name=__codelineno-3-30 href=#__codelineno-3-30></a>        <span class=s2>&quot;use_docker&quot;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span>
<a id=__codelineno-3-31 name=__codelineno-3-31 href=#__codelineno-3-31></a>    <span class=p>},</span>
<a id=__codelineno-3-32 name=__codelineno-3-32 href=#__codelineno-3-32></a>    <span class=n>is_termination_msg</span><span class=o>=</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;content&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)</span> <span class=ow>and</span> <span class=s2>&quot;TERMINATE&quot;</span> <span class=ow>in</span> <span class=n>x</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;content&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>),</span>
<a id=__codelineno-3-33 name=__codelineno-3-33 href=#__codelineno-3-33></a>    <span class=n>max_consecutive_auto_reply</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-3-34 name=__codelineno-3-34 href=#__codelineno-3-34></a><span class=p>)</span>
<a id=__codelineno-3-35 name=__codelineno-3-35 href=#__codelineno-3-35></a>
<a id=__codelineno-3-36 name=__codelineno-3-36 href=#__codelineno-3-36></a><span class=n>user_proxy</span><span class=o>.</span><span class=n>initiate_chat</span><span class=p>(</span>
<a id=__codelineno-3-37 name=__codelineno-3-37 href=#__codelineno-3-37></a>    <span class=n>assistant</span><span class=p>,</span>
<a id=__codelineno-3-38 name=__codelineno-3-38 href=#__codelineno-3-38></a>    <span class=n>message</span><span class=o>=</span><span class=s2>&quot;Write a python program to print the first 10 numbers of the Fibonacci sequence. Just output the python code, no additional information.&quot;</span><span class=p>,</span>
<a id=__codelineno-3-39 name=__codelineno-3-39 href=#__codelineno-3-39></a><span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=go>user_proxy (to assistant):</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=go>Write a python program to print the first 10 numbers of the Fibonacci sequence. Just output the python code, no additional information.</span>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=go>--------------------------------------------------------------------------------</span>
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=go>assistant (to user_proxy):</span>
<a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a>
<a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=go>&#39;&#39;&#39;python</span>
<a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a><span class=gp># </span>Define<span class=w> </span>a<span class=w> </span><span class=k>function</span><span class=w> </span>to<span class=w> </span>calculate<span class=w> </span>Fibonacci<span class=w> </span>sequence
<a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a><span class=go>def fibonacci(n):</span>
<a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a><span class=go>    if n &lt;= 0:</span>
<a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a><span class=go>        return []</span>
<a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a><span class=go>    elif n == 1:</span>
<a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a><span class=go>        return [0]</span>
<a id=__codelineno-4-15 name=__codelineno-4-15 href=#__codelineno-4-15></a><span class=go>    elif n == 2:</span>
<a id=__codelineno-4-16 name=__codelineno-4-16 href=#__codelineno-4-16></a><span class=go>        return [0, 1]</span>
<a id=__codelineno-4-17 name=__codelineno-4-17 href=#__codelineno-4-17></a><span class=go>    else:</span>
<a id=__codelineno-4-18 name=__codelineno-4-18 href=#__codelineno-4-18></a><span class=go>        sequence = [0, 1]</span>
<a id=__codelineno-4-19 name=__codelineno-4-19 href=#__codelineno-4-19></a><span class=go>        for i in range(2, n):</span>
<a id=__codelineno-4-20 name=__codelineno-4-20 href=#__codelineno-4-20></a><span class=go>            sequence.append(sequence[i-1] + sequence[i-2])</span>
<a id=__codelineno-4-21 name=__codelineno-4-21 href=#__codelineno-4-21></a><span class=go>        return sequence</span>
<a id=__codelineno-4-22 name=__codelineno-4-22 href=#__codelineno-4-22></a>
<a id=__codelineno-4-23 name=__codelineno-4-23 href=#__codelineno-4-23></a><span class=gp># </span>Call<span class=w> </span>the<span class=w> </span><span class=k>function</span><span class=w> </span>to<span class=w> </span>get<span class=w> </span>the<span class=w> </span>first<span class=w> </span><span class=m>10</span><span class=w> </span>Fibonacci<span class=w> </span>numbers
<a id=__codelineno-4-24 name=__codelineno-4-24 href=#__codelineno-4-24></a><span class=go>fib_sequence = fibonacci(10)</span>
<a id=__codelineno-4-25 name=__codelineno-4-25 href=#__codelineno-4-25></a><span class=go>print(fib_sequence)</span>
<a id=__codelineno-4-26 name=__codelineno-4-26 href=#__codelineno-4-26></a><span class=go>&#39;&#39;&#39;</span>
<a id=__codelineno-4-27 name=__codelineno-4-27 href=#__codelineno-4-27></a>
<a id=__codelineno-4-28 name=__codelineno-4-28 href=#__codelineno-4-28></a><span class=go>--------------------------------------------------------------------------------</span>
<a id=__codelineno-4-29 name=__codelineno-4-29 href=#__codelineno-4-29></a>
<a id=__codelineno-4-30 name=__codelineno-4-30 href=#__codelineno-4-30></a><span class=go>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; EXECUTING CODE BLOCK 0 (inferred language is python)...</span>
<a id=__codelineno-4-31 name=__codelineno-4-31 href=#__codelineno-4-31></a><span class=go>user_proxy (to assistant):</span>
<a id=__codelineno-4-32 name=__codelineno-4-32 href=#__codelineno-4-32></a>
<a id=__codelineno-4-33 name=__codelineno-4-33 href=#__codelineno-4-33></a><span class=go>exitcode: 0 (execution succeeded)</span>
<a id=__codelineno-4-34 name=__codelineno-4-34 href=#__codelineno-4-34></a><span class=go>Code output:</span>
<a id=__codelineno-4-35 name=__codelineno-4-35 href=#__codelineno-4-35></a><span class=go>[0, 1, 1, 2, 3, 5, 8, 13, 21, 34]</span>
<a id=__codelineno-4-36 name=__codelineno-4-36 href=#__codelineno-4-36></a>
<a id=__codelineno-4-37 name=__codelineno-4-37 href=#__codelineno-4-37></a>
<a id=__codelineno-4-38 name=__codelineno-4-38 href=#__codelineno-4-38></a><span class=go>--------------------------------------------------------------------------------</span>
<a id=__codelineno-4-39 name=__codelineno-4-39 href=#__codelineno-4-39></a><span class=go>assistant (to user_proxy):</span>
<a id=__codelineno-4-40 name=__codelineno-4-40 href=#__codelineno-4-40></a>
<a id=__codelineno-4-41 name=__codelineno-4-41 href=#__codelineno-4-41></a><span class=go>Great, the code executed successfully and printed the first 10 numbers of the Fibonacci sequence correctly.</span>
<a id=__codelineno-4-42 name=__codelineno-4-42 href=#__codelineno-4-42></a>
<a id=__codelineno-4-43 name=__codelineno-4-43 href=#__codelineno-4-43></a><span class=go>TERMINATE</span>
<a id=__codelineno-4-44 name=__codelineno-4-44 href=#__codelineno-4-44></a>
<a id=__codelineno-4-45 name=__codelineno-4-45 href=#__codelineno-4-45></a><span class=go>--------------------------------------------------------------------------------</span>
</code></pre></div></p> <h2 id=tool-call-example>Tool Call Example<a class=headerlink href=#tool-call-example title="Permanent link">#</a></h2> <p>In this example, instead of writing code, we will show how we can perform multiple tool calling with Meta's Llama 3.1 70B model, where it recommends calling more than one tool at a time.</p> <p>We'll use a simple travel agent assistant program where we have a couple of tools for weather and currency conversion.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=kn>import</span><span class=w> </span><span class=nn>json</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=kn>from</span><span class=w> </span><span class=nn>typing</span><span class=w> </span><span class=kn>import</span> <span class=n>Literal</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=kn>import</span><span class=w> </span><span class=nn>autogen</span>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a>
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=n>config_list_bedrock</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a>    <span class=p>{</span>
<a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a>        <span class=s2>&quot;api_type&quot;</span><span class=p>:</span> <span class=s2>&quot;bedrock&quot;</span><span class=p>,</span>
<a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a>        <span class=s2>&quot;model&quot;</span><span class=p>:</span> <span class=s2>&quot;meta.llama3-1-70b-instruct-v1:0&quot;</span><span class=p>,</span>
<a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a>        <span class=s2>&quot;aws_region&quot;</span><span class=p>:</span> <span class=s2>&quot;us-west-2&quot;</span><span class=p>,</span>
<a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a>        <span class=s2>&quot;aws_access_key&quot;</span><span class=p>:</span> <span class=s2>&quot;[FILL THIS IN]&quot;</span><span class=p>,</span>
<a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a>        <span class=s2>&quot;aws_secret_key&quot;</span><span class=p>:</span> <span class=s2>&quot;[FILL THIS IN]&quot;</span><span class=p>,</span>
<a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a>        <span class=s2>&quot;price&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mf>0.00265</span><span class=p>,</span> <span class=mf>0.0035</span><span class=p>],</span>
<a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a>        <span class=s2>&quot;cache_seed&quot;</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>  <span class=c1># turn off caching</span>
<a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a>    <span class=p>}</span>
<a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a><span class=p>]</span>
<a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a>
<a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a><span class=c1># Create the agent and include examples of the function calling JSON in the prompt</span>
<a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a><span class=c1># to help guide the model</span>
<a id=__codelineno-5-20 name=__codelineno-5-20 href=#__codelineno-5-20></a><span class=n>chatbot</span> <span class=o>=</span> <span class=n>autogen</span><span class=o>.</span><span class=n>AssistantAgent</span><span class=p>(</span>
<a id=__codelineno-5-21 name=__codelineno-5-21 href=#__codelineno-5-21></a>    <span class=n>name</span><span class=o>=</span><span class=s2>&quot;chatbot&quot;</span><span class=p>,</span>
<a id=__codelineno-5-22 name=__codelineno-5-22 href=#__codelineno-5-22></a>    <span class=n>system_message</span><span class=o>=</span><span class=s2>&quot;&quot;&quot;For currency exchange and weather forecasting tasks,</span>
<a id=__codelineno-5-23 name=__codelineno-5-23 href=#__codelineno-5-23></a><span class=s2>        only use the functions you have been provided with.</span>
<a id=__codelineno-5-24 name=__codelineno-5-24 href=#__codelineno-5-24></a><span class=s2>        Output only the word &#39;TERMINATE&#39; when an answer has been provided.</span>
<a id=__codelineno-5-25 name=__codelineno-5-25 href=#__codelineno-5-25></a><span class=s2>        Use both tools together if you can.&quot;&quot;&quot;</span><span class=p>,</span>
<a id=__codelineno-5-26 name=__codelineno-5-26 href=#__codelineno-5-26></a>    <span class=n>llm_config</span><span class=o>=</span><span class=p>{</span>
<a id=__codelineno-5-27 name=__codelineno-5-27 href=#__codelineno-5-27></a>        <span class=s2>&quot;config_list&quot;</span><span class=p>:</span> <span class=n>config_list_bedrock</span><span class=p>,</span>
<a id=__codelineno-5-28 name=__codelineno-5-28 href=#__codelineno-5-28></a>    <span class=p>},</span>
<a id=__codelineno-5-29 name=__codelineno-5-29 href=#__codelineno-5-29></a><span class=p>)</span>
<a id=__codelineno-5-30 name=__codelineno-5-30 href=#__codelineno-5-30></a>
<a id=__codelineno-5-31 name=__codelineno-5-31 href=#__codelineno-5-31></a><span class=n>user_proxy</span> <span class=o>=</span> <span class=n>autogen</span><span class=o>.</span><span class=n>UserProxyAgent</span><span class=p>(</span>
<a id=__codelineno-5-32 name=__codelineno-5-32 href=#__codelineno-5-32></a>    <span class=n>name</span><span class=o>=</span><span class=s2>&quot;user_proxy&quot;</span><span class=p>,</span>
<a id=__codelineno-5-33 name=__codelineno-5-33 href=#__codelineno-5-33></a>    <span class=n>is_termination_msg</span><span class=o>=</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;content&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)</span> <span class=ow>and</span> <span class=s2>&quot;TERMINATE&quot;</span> <span class=ow>in</span> <span class=n>x</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;content&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>),</span>
<a id=__codelineno-5-34 name=__codelineno-5-34 href=#__codelineno-5-34></a>    <span class=n>human_input_mode</span><span class=o>=</span><span class=s2>&quot;NEVER&quot;</span><span class=p>,</span>
<a id=__codelineno-5-35 name=__codelineno-5-35 href=#__codelineno-5-35></a>    <span class=n>max_consecutive_auto_reply</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span>
<a id=__codelineno-5-36 name=__codelineno-5-36 href=#__codelineno-5-36></a><span class=p>)</span>
<a id=__codelineno-5-37 name=__codelineno-5-37 href=#__codelineno-5-37></a>
<a id=__codelineno-5-38 name=__codelineno-5-38 href=#__codelineno-5-38></a><span class=c1># Create the two functions, annotating them so that those descriptions can be passed through to the LLM.</span>
<a id=__codelineno-5-39 name=__codelineno-5-39 href=#__codelineno-5-39></a><span class=c1># With Meta&#39;s Llama 3.1 models, they are more likely to pass a numeric parameter as a string, e.g. &quot;123.45&quot; instead of 123.45, so we&#39;ll convert numeric parameters from strings to floats if necessary.</span>
<a id=__codelineno-5-40 name=__codelineno-5-40 href=#__codelineno-5-40></a><span class=c1># We associate them with the agents using `register_for_execution` for the user_proxy so it can execute the function and `register_for_llm` for the chatbot (powered by the LLM) so it can pass the function definitions to the LLM.</span>
<a id=__codelineno-5-41 name=__codelineno-5-41 href=#__codelineno-5-41></a>
<a id=__codelineno-5-42 name=__codelineno-5-42 href=#__codelineno-5-42></a><span class=c1># Currency Exchange function</span>
<a id=__codelineno-5-43 name=__codelineno-5-43 href=#__codelineno-5-43></a>
<a id=__codelineno-5-44 name=__codelineno-5-44 href=#__codelineno-5-44></a><span class=n>CurrencySymbol</span> <span class=o>=</span> <span class=n>Literal</span><span class=p>[</span><span class=s2>&quot;USD&quot;</span><span class=p>,</span> <span class=s2>&quot;EUR&quot;</span><span class=p>]</span>
<a id=__codelineno-5-45 name=__codelineno-5-45 href=#__codelineno-5-45></a>
<a id=__codelineno-5-46 name=__codelineno-5-46 href=#__codelineno-5-46></a><span class=c1># Define our function that we expect to call</span>
<a id=__codelineno-5-47 name=__codelineno-5-47 href=#__codelineno-5-47></a>
<a id=__codelineno-5-48 name=__codelineno-5-48 href=#__codelineno-5-48></a>
<a id=__codelineno-5-49 name=__codelineno-5-49 href=#__codelineno-5-49></a><span class=k>def</span><span class=w> </span><span class=nf>exchange_rate</span><span class=p>(</span><span class=n>base_currency</span><span class=p>:</span> <span class=n>CurrencySymbol</span><span class=p>,</span> <span class=n>quote_currency</span><span class=p>:</span> <span class=n>CurrencySymbol</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>float</span><span class=p>:</span>
<a id=__codelineno-5-50 name=__codelineno-5-50 href=#__codelineno-5-50></a>    <span class=k>if</span> <span class=n>base_currency</span> <span class=o>==</span> <span class=n>quote_currency</span><span class=p>:</span>
<a id=__codelineno-5-51 name=__codelineno-5-51 href=#__codelineno-5-51></a>        <span class=k>return</span> <span class=mf>1.0</span>
<a id=__codelineno-5-52 name=__codelineno-5-52 href=#__codelineno-5-52></a>    <span class=k>elif</span> <span class=n>base_currency</span> <span class=o>==</span> <span class=s2>&quot;USD&quot;</span> <span class=ow>and</span> <span class=n>quote_currency</span> <span class=o>==</span> <span class=s2>&quot;EUR&quot;</span><span class=p>:</span>
<a id=__codelineno-5-53 name=__codelineno-5-53 href=#__codelineno-5-53></a>        <span class=k>return</span> <span class=mi>1</span> <span class=o>/</span> <span class=mf>1.1</span>
<a id=__codelineno-5-54 name=__codelineno-5-54 href=#__codelineno-5-54></a>    <span class=k>elif</span> <span class=n>base_currency</span> <span class=o>==</span> <span class=s2>&quot;EUR&quot;</span> <span class=ow>and</span> <span class=n>quote_currency</span> <span class=o>==</span> <span class=s2>&quot;USD&quot;</span><span class=p>:</span>
<a id=__codelineno-5-55 name=__codelineno-5-55 href=#__codelineno-5-55></a>        <span class=k>return</span> <span class=mf>1.1</span>
<a id=__codelineno-5-56 name=__codelineno-5-56 href=#__codelineno-5-56></a>    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-5-57 name=__codelineno-5-57 href=#__codelineno-5-57></a>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Unknown currencies </span><span class=si>{</span><span class=n>base_currency</span><span class=si>}</span><span class=s2>, </span><span class=si>{</span><span class=n>quote_currency</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-5-58 name=__codelineno-5-58 href=#__codelineno-5-58></a>
<a id=__codelineno-5-59 name=__codelineno-5-59 href=#__codelineno-5-59></a>
<a id=__codelineno-5-60 name=__codelineno-5-60 href=#__codelineno-5-60></a><span class=c1># Register the function with the agent</span>
<a id=__codelineno-5-61 name=__codelineno-5-61 href=#__codelineno-5-61></a>
<a id=__codelineno-5-62 name=__codelineno-5-62 href=#__codelineno-5-62></a>
<a id=__codelineno-5-63 name=__codelineno-5-63 href=#__codelineno-5-63></a><span class=nd>@user_proxy</span><span class=o>.</span><span class=n>register_for_execution</span><span class=p>()</span>
<a id=__codelineno-5-64 name=__codelineno-5-64 href=#__codelineno-5-64></a><span class=nd>@chatbot</span><span class=o>.</span><span class=n>register_for_llm</span><span class=p>(</span><span class=n>description</span><span class=o>=</span><span class=s2>&quot;Currency exchange calculator.&quot;</span><span class=p>)</span>
<a id=__codelineno-5-65 name=__codelineno-5-65 href=#__codelineno-5-65></a><span class=k>def</span><span class=w> </span><span class=nf>currency_calculator</span><span class=p>(</span>
<a id=__codelineno-5-66 name=__codelineno-5-66 href=#__codelineno-5-66></a>    <span class=n>base_amount</span><span class=p>:</span> <span class=n>Annotated</span><span class=p>[</span><span class=nb>float</span><span class=p>,</span> <span class=s2>&quot;Amount of currency in base_currency, float values (no strings), e.g. 987.82&quot;</span><span class=p>],</span>
<a id=__codelineno-5-67 name=__codelineno-5-67 href=#__codelineno-5-67></a>    <span class=n>base_currency</span><span class=p>:</span> <span class=n>Annotated</span><span class=p>[</span><span class=n>CurrencySymbol</span><span class=p>,</span> <span class=s2>&quot;Base currency&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;USD&quot;</span><span class=p>,</span>
<a id=__codelineno-5-68 name=__codelineno-5-68 href=#__codelineno-5-68></a>    <span class=n>quote_currency</span><span class=p>:</span> <span class=n>Annotated</span><span class=p>[</span><span class=n>CurrencySymbol</span><span class=p>,</span> <span class=s2>&quot;Quote currency&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;EUR&quot;</span><span class=p>,</span>
<a id=__codelineno-5-69 name=__codelineno-5-69 href=#__codelineno-5-69></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<a id=__codelineno-5-70 name=__codelineno-5-70 href=#__codelineno-5-70></a>    <span class=c1># If the amount is passed in as a string, e.g. &quot;123.45&quot;, attempt to convert to a float</span>
<a id=__codelineno-5-71 name=__codelineno-5-71 href=#__codelineno-5-71></a>    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>base_amount</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
<a id=__codelineno-5-72 name=__codelineno-5-72 href=#__codelineno-5-72></a>        <span class=n>base_amount</span> <span class=o>=</span> <span class=nb>float</span><span class=p>(</span><span class=n>base_amount</span><span class=p>)</span>
<a id=__codelineno-5-73 name=__codelineno-5-73 href=#__codelineno-5-73></a>
<a id=__codelineno-5-74 name=__codelineno-5-74 href=#__codelineno-5-74></a>    <span class=n>quote_amount</span> <span class=o>=</span> <span class=n>exchange_rate</span><span class=p>(</span><span class=n>base_currency</span><span class=p>,</span> <span class=n>quote_currency</span><span class=p>)</span> <span class=o>*</span> <span class=n>base_amount</span>
<a id=__codelineno-5-75 name=__codelineno-5-75 href=#__codelineno-5-75></a>    <span class=k>return</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=nb>format</span><span class=p>(</span><span class=n>quote_amount</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;.2f&#39;</span><span class=p>)</span><span class=si>}</span><span class=s2> </span><span class=si>{</span><span class=n>quote_currency</span><span class=si>}</span><span class=s2>&quot;</span>
<a id=__codelineno-5-76 name=__codelineno-5-76 href=#__codelineno-5-76></a>
<a id=__codelineno-5-77 name=__codelineno-5-77 href=#__codelineno-5-77></a>
<a id=__codelineno-5-78 name=__codelineno-5-78 href=#__codelineno-5-78></a><span class=c1># Weather function</span>
<a id=__codelineno-5-79 name=__codelineno-5-79 href=#__codelineno-5-79></a>
<a id=__codelineno-5-80 name=__codelineno-5-80 href=#__codelineno-5-80></a>
<a id=__codelineno-5-81 name=__codelineno-5-81 href=#__codelineno-5-81></a><span class=c1># Example function to make available to model</span>
<a id=__codelineno-5-82 name=__codelineno-5-82 href=#__codelineno-5-82></a><span class=k>def</span><span class=w> </span><span class=nf>get_current_weather</span><span class=p>(</span><span class=n>location</span><span class=p>,</span> <span class=n>unit</span><span class=o>=</span><span class=s2>&quot;fahrenheit&quot;</span><span class=p>):</span>
<a id=__codelineno-5-83 name=__codelineno-5-83 href=#__codelineno-5-83></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Get the weather for some location&quot;&quot;&quot;</span>
<a id=__codelineno-5-84 name=__codelineno-5-84 href=#__codelineno-5-84></a>    <span class=k>if</span> <span class=s2>&quot;chicago&quot;</span> <span class=ow>in</span> <span class=n>location</span><span class=o>.</span><span class=n>lower</span><span class=p>():</span>
<a id=__codelineno-5-85 name=__codelineno-5-85 href=#__codelineno-5-85></a>        <span class=k>return</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>({</span><span class=s2>&quot;location&quot;</span><span class=p>:</span> <span class=s2>&quot;Chicago&quot;</span><span class=p>,</span> <span class=s2>&quot;temperature&quot;</span><span class=p>:</span> <span class=s2>&quot;13&quot;</span><span class=p>,</span> <span class=s2>&quot;unit&quot;</span><span class=p>:</span> <span class=n>unit</span><span class=p>})</span>
<a id=__codelineno-5-86 name=__codelineno-5-86 href=#__codelineno-5-86></a>    <span class=k>elif</span> <span class=s2>&quot;san francisco&quot;</span> <span class=ow>in</span> <span class=n>location</span><span class=o>.</span><span class=n>lower</span><span class=p>():</span>
<a id=__codelineno-5-87 name=__codelineno-5-87 href=#__codelineno-5-87></a>        <span class=k>return</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>({</span><span class=s2>&quot;location&quot;</span><span class=p>:</span> <span class=s2>&quot;San Francisco&quot;</span><span class=p>,</span> <span class=s2>&quot;temperature&quot;</span><span class=p>:</span> <span class=s2>&quot;55&quot;</span><span class=p>,</span> <span class=s2>&quot;unit&quot;</span><span class=p>:</span> <span class=n>unit</span><span class=p>})</span>
<a id=__codelineno-5-88 name=__codelineno-5-88 href=#__codelineno-5-88></a>    <span class=k>elif</span> <span class=s2>&quot;new york&quot;</span> <span class=ow>in</span> <span class=n>location</span><span class=o>.</span><span class=n>lower</span><span class=p>():</span>
<a id=__codelineno-5-89 name=__codelineno-5-89 href=#__codelineno-5-89></a>        <span class=k>return</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>({</span><span class=s2>&quot;location&quot;</span><span class=p>:</span> <span class=s2>&quot;New York&quot;</span><span class=p>,</span> <span class=s2>&quot;temperature&quot;</span><span class=p>:</span> <span class=s2>&quot;11&quot;</span><span class=p>,</span> <span class=s2>&quot;unit&quot;</span><span class=p>:</span> <span class=n>unit</span><span class=p>})</span>
<a id=__codelineno-5-90 name=__codelineno-5-90 href=#__codelineno-5-90></a>    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-5-91 name=__codelineno-5-91 href=#__codelineno-5-91></a>        <span class=k>return</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>({</span><span class=s2>&quot;location&quot;</span><span class=p>:</span> <span class=n>location</span><span class=p>,</span> <span class=s2>&quot;temperature&quot;</span><span class=p>:</span> <span class=s2>&quot;unknown&quot;</span><span class=p>})</span>
<a id=__codelineno-5-92 name=__codelineno-5-92 href=#__codelineno-5-92></a>
<a id=__codelineno-5-93 name=__codelineno-5-93 href=#__codelineno-5-93></a>
<a id=__codelineno-5-94 name=__codelineno-5-94 href=#__codelineno-5-94></a><span class=c1># Register the function with the agent</span>
<a id=__codelineno-5-95 name=__codelineno-5-95 href=#__codelineno-5-95></a>
<a id=__codelineno-5-96 name=__codelineno-5-96 href=#__codelineno-5-96></a>
<a id=__codelineno-5-97 name=__codelineno-5-97 href=#__codelineno-5-97></a><span class=nd>@user_proxy</span><span class=o>.</span><span class=n>register_for_execution</span><span class=p>()</span>
<a id=__codelineno-5-98 name=__codelineno-5-98 href=#__codelineno-5-98></a><span class=nd>@chatbot</span><span class=o>.</span><span class=n>register_for_llm</span><span class=p>(</span><span class=n>description</span><span class=o>=</span><span class=s2>&quot;Weather forecast for US cities.&quot;</span><span class=p>)</span>
<a id=__codelineno-5-99 name=__codelineno-5-99 href=#__codelineno-5-99></a><span class=k>def</span><span class=w> </span><span class=nf>weather_forecast</span><span class=p>(</span>
<a id=__codelineno-5-100 name=__codelineno-5-100 href=#__codelineno-5-100></a>    <span class=n>location</span><span class=p>:</span> <span class=n>Annotated</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=s2>&quot;City name&quot;</span><span class=p>],</span>
<a id=__codelineno-5-101 name=__codelineno-5-101 href=#__codelineno-5-101></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<a id=__codelineno-5-102 name=__codelineno-5-102 href=#__codelineno-5-102></a>    <span class=n>weather_details</span> <span class=o>=</span> <span class=n>get_current_weather</span><span class=p>(</span><span class=n>location</span><span class=o>=</span><span class=n>location</span><span class=p>)</span>
<a id=__codelineno-5-103 name=__codelineno-5-103 href=#__codelineno-5-103></a>    <span class=n>weather</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>weather_details</span><span class=p>)</span>
<a id=__codelineno-5-104 name=__codelineno-5-104 href=#__codelineno-5-104></a>    <span class=k>return</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>weather</span><span class=p>[</span><span class=s1>&#39;location&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> will be </span><span class=si>{</span><span class=n>weather</span><span class=p>[</span><span class=s1>&#39;temperature&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> degrees </span><span class=si>{</span><span class=n>weather</span><span class=p>[</span><span class=s1>&#39;unit&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span>
<a id=__codelineno-5-105 name=__codelineno-5-105 href=#__codelineno-5-105></a>
<a id=__codelineno-5-106 name=__codelineno-5-106 href=#__codelineno-5-106></a><span class=c1># start the conversation</span>
<a id=__codelineno-5-107 name=__codelineno-5-107 href=#__codelineno-5-107></a><span class=n>res</span> <span class=o>=</span> <span class=n>user_proxy</span><span class=o>.</span><span class=n>initiate_chat</span><span class=p>(</span>
<a id=__codelineno-5-108 name=__codelineno-5-108 href=#__codelineno-5-108></a>    <span class=n>chatbot</span><span class=p>,</span>
<a id=__codelineno-5-109 name=__codelineno-5-109 href=#__codelineno-5-109></a>    <span class=n>message</span><span class=o>=</span><span class=s2>&quot;What&#39;s the weather in New York and can you tell me how much is 123.45 EUR in USD so I can spend it on my holiday?&quot;</span><span class=p>,</span>
<a id=__codelineno-5-110 name=__codelineno-5-110 href=#__codelineno-5-110></a>    <span class=n>summary_method</span><span class=o>=</span><span class=s2>&quot;reflection_with_llm&quot;</span><span class=p>,</span>
<a id=__codelineno-5-111 name=__codelineno-5-111 href=#__codelineno-5-111></a><span class=p>)</span>
<a id=__codelineno-5-112 name=__codelineno-5-112 href=#__codelineno-5-112></a>
<a id=__codelineno-5-113 name=__codelineno-5-113 href=#__codelineno-5-113></a><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=o>.</span><span class=n>summary</span><span class=p>[</span><span class=s2>&quot;content&quot;</span><span class=p>])</span>
</code></pre></div> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=go>user_proxy (to chatbot):</span>
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=go>What&#39;s the weather in New York and can you tell me how much is 123.45 EUR in USD so I can spend it on my holiday?</span>
<a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a>
<a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=go>--------------------------------------------------------------------------------</span>
<a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=go>chatbot (to user_proxy):</span>
<a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a>
<a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a>
<a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a><span class=go>***** Suggested tool call (tooluse__h3d1AEDR3Sm2XRoGCjc2Q): weather_forecast *****</span>
<a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a><span class=go>Arguments:</span>
<a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a><span class=go>{&quot;location&quot;: &quot;New York&quot;}</span>
<a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a><span class=go>**********************************************************************************</span>
<a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a><span class=go>***** Suggested tool call (tooluse_wrdda3wRRO-ugUY4qrv8YQ): currency_calculator *****</span>
<a id=__codelineno-6-14 name=__codelineno-6-14 href=#__codelineno-6-14></a><span class=go>Arguments:</span>
<a id=__codelineno-6-15 name=__codelineno-6-15 href=#__codelineno-6-15></a><span class=go>{&quot;base_amount&quot;: &quot;123&quot;, &quot;base_currency&quot;: &quot;EUR&quot;, &quot;quote_currency&quot;: &quot;USD&quot;}</span>
<a id=__codelineno-6-16 name=__codelineno-6-16 href=#__codelineno-6-16></a><span class=go>*************************************************************************************</span>
<a id=__codelineno-6-17 name=__codelineno-6-17 href=#__codelineno-6-17></a>
<a id=__codelineno-6-18 name=__codelineno-6-18 href=#__codelineno-6-18></a><span class=go>--------------------------------------------------------------------------------</span>
<a id=__codelineno-6-19 name=__codelineno-6-19 href=#__codelineno-6-19></a>
<a id=__codelineno-6-20 name=__codelineno-6-20 href=#__codelineno-6-20></a><span class=go>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; EXECUTING FUNCTION weather_forecast...</span>
<a id=__codelineno-6-21 name=__codelineno-6-21 href=#__codelineno-6-21></a>
<a id=__codelineno-6-22 name=__codelineno-6-22 href=#__codelineno-6-22></a><span class=go>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; EXECUTING FUNCTION currency_calculator...</span>
<a id=__codelineno-6-23 name=__codelineno-6-23 href=#__codelineno-6-23></a><span class=go>user_proxy (to chatbot):</span>
<a id=__codelineno-6-24 name=__codelineno-6-24 href=#__codelineno-6-24></a>
<a id=__codelineno-6-25 name=__codelineno-6-25 href=#__codelineno-6-25></a><span class=go>user_proxy (to chatbot):</span>
<a id=__codelineno-6-26 name=__codelineno-6-26 href=#__codelineno-6-26></a>
<a id=__codelineno-6-27 name=__codelineno-6-27 href=#__codelineno-6-27></a><span class=go>***** Response from calling tool (tooluse__h3d1AEDR3Sm2XRoGCjc2Q) *****</span>
<a id=__codelineno-6-28 name=__codelineno-6-28 href=#__codelineno-6-28></a><span class=go>New York will be 11 degrees fahrenheit</span>
<a id=__codelineno-6-29 name=__codelineno-6-29 href=#__codelineno-6-29></a><span class=go>***********************************************************************</span>
<a id=__codelineno-6-30 name=__codelineno-6-30 href=#__codelineno-6-30></a>
<a id=__codelineno-6-31 name=__codelineno-6-31 href=#__codelineno-6-31></a><span class=go>--------------------------------------------------------------------------------</span>
<a id=__codelineno-6-32 name=__codelineno-6-32 href=#__codelineno-6-32></a><span class=go>user_proxy (to chatbot):</span>
<a id=__codelineno-6-33 name=__codelineno-6-33 href=#__codelineno-6-33></a>
<a id=__codelineno-6-34 name=__codelineno-6-34 href=#__codelineno-6-34></a><span class=go>***** Response from calling tool (tooluse_wrdda3wRRO-ugUY4qrv8YQ) *****</span>
<a id=__codelineno-6-35 name=__codelineno-6-35 href=#__codelineno-6-35></a><span class=go>135.30 USD</span>
<a id=__codelineno-6-36 name=__codelineno-6-36 href=#__codelineno-6-36></a><span class=go>***********************************************************************</span>
<a id=__codelineno-6-37 name=__codelineno-6-37 href=#__codelineno-6-37></a>
<a id=__codelineno-6-38 name=__codelineno-6-38 href=#__codelineno-6-38></a><span class=go>--------------------------------------------------------------------------------</span>
<a id=__codelineno-6-39 name=__codelineno-6-39 href=#__codelineno-6-39></a><span class=go>chatbot (to user_proxy):</span>
<a id=__codelineno-6-40 name=__codelineno-6-40 href=#__codelineno-6-40></a>
<a id=__codelineno-6-41 name=__codelineno-6-41 href=#__codelineno-6-41></a>
<a id=__codelineno-6-42 name=__codelineno-6-42 href=#__codelineno-6-42></a>
<a id=__codelineno-6-43 name=__codelineno-6-43 href=#__codelineno-6-43></a><span class=go>TERMINATE</span>
<a id=__codelineno-6-44 name=__codelineno-6-44 href=#__codelineno-6-44></a>
<a id=__codelineno-6-45 name=__codelineno-6-45 href=#__codelineno-6-45></a><span class=go>--------------------------------------------------------------------------------</span>
<a id=__codelineno-6-46 name=__codelineno-6-46 href=#__codelineno-6-46></a>
<a id=__codelineno-6-47 name=__codelineno-6-47 href=#__codelineno-6-47></a>
<a id=__codelineno-6-48 name=__codelineno-6-48 href=#__codelineno-6-48></a><span class=go>The weather in New York is 11 degrees Fahrenheit. 123.45 EUR is equivalent to 135.30 USD.</span>
</code></pre></div></p> <h2 id=group-chat-example-with-anthropics-claude-3-sonnet-mistrals-large-2-and-metas-llama-31-70b>Group Chat Example with Anthropic's Claude 3 Sonnet, Mistral's Large 2, and Meta's Llama 3.1 70B<a class=headerlink href=#group-chat-example-with-anthropics-claude-3-sonnet-mistrals-large-2-and-metas-llama-31-70b title="Permanent link">#</a></h2> <p>The flexibility of using LLMs from the industry's leading providers, particularly larger models, with Amazon Bedrock allows you to use multiple of them in a single workflow.</p> <p>Here we have a conversation that has two models (Anthropic's Claude 3 Sonnet and Mistral's Large 2) debate each other with another as the judge (Meta's Llama 3.1 70B). Additionally, a tool call is made to pull through some mock news that they will debate on.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=kn>from</span><span class=w> </span><span class=nn>typing</span><span class=w> </span><span class=kn>import</span> <span class=n>Annotated</span><span class=p>,</span> <span class=n>Literal</span>
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=kn>import</span><span class=w> </span><span class=nn>autogen</span>
<a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=kn>from</span><span class=w> </span><span class=nn>autogen</span><span class=w> </span><span class=kn>import</span> <span class=n>AssistantAgent</span><span class=p>,</span> <span class=n>GroupChat</span><span class=p>,</span> <span class=n>GroupChatManager</span><span class=p>,</span> <span class=n>UserProxyAgent</span>
<a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a>
<a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=n>config_list_sonnet</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a>    <span class=p>{</span>
<a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a>        <span class=s2>&quot;api_type&quot;</span><span class=p>:</span> <span class=s2>&quot;bedrock&quot;</span><span class=p>,</span>
<a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a>        <span class=s2>&quot;model&quot;</span><span class=p>:</span> <span class=s2>&quot;anthropic.claude-3-sonnet-20240229-v1:0&quot;</span><span class=p>,</span>
<a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a>        <span class=s2>&quot;aws_region&quot;</span><span class=p>:</span> <span class=s2>&quot;us-east-1&quot;</span><span class=p>,</span>
<a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a>        <span class=s2>&quot;aws_access_key&quot;</span><span class=p>:</span> <span class=s2>&quot;[FILL THIS IN]&quot;</span><span class=p>,</span>
<a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a>        <span class=s2>&quot;aws_secret_key&quot;</span><span class=p>:</span> <span class=s2>&quot;[FILL THIS IN]&quot;</span><span class=p>,</span>
<a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a>        <span class=s2>&quot;price&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mf>0.003</span><span class=p>,</span> <span class=mf>0.015</span><span class=p>],</span>
<a id=__codelineno-7-14 name=__codelineno-7-14 href=#__codelineno-7-14></a>        <span class=s2>&quot;temperature&quot;</span><span class=p>:</span> <span class=mf>0.1</span><span class=p>,</span>
<a id=__codelineno-7-15 name=__codelineno-7-15 href=#__codelineno-7-15></a>        <span class=s2>&quot;cache_seed&quot;</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>  <span class=c1># turn off caching</span>
<a id=__codelineno-7-16 name=__codelineno-7-16 href=#__codelineno-7-16></a>    <span class=p>}</span>
<a id=__codelineno-7-17 name=__codelineno-7-17 href=#__codelineno-7-17></a><span class=p>]</span>
<a id=__codelineno-7-18 name=__codelineno-7-18 href=#__codelineno-7-18></a>
<a id=__codelineno-7-19 name=__codelineno-7-19 href=#__codelineno-7-19></a><span class=n>config_list_mistral</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-7-20 name=__codelineno-7-20 href=#__codelineno-7-20></a>    <span class=p>{</span>
<a id=__codelineno-7-21 name=__codelineno-7-21 href=#__codelineno-7-21></a>        <span class=s2>&quot;api_type&quot;</span><span class=p>:</span> <span class=s2>&quot;bedrock&quot;</span><span class=p>,</span>
<a id=__codelineno-7-22 name=__codelineno-7-22 href=#__codelineno-7-22></a>        <span class=s2>&quot;model&quot;</span><span class=p>:</span> <span class=s2>&quot;mistral.mistral-large-2407-v1:0&quot;</span><span class=p>,</span>
<a id=__codelineno-7-23 name=__codelineno-7-23 href=#__codelineno-7-23></a>        <span class=s2>&quot;aws_region&quot;</span><span class=p>:</span> <span class=s2>&quot;us-west-2&quot;</span><span class=p>,</span>
<a id=__codelineno-7-24 name=__codelineno-7-24 href=#__codelineno-7-24></a>        <span class=s2>&quot;aws_access_key&quot;</span><span class=p>:</span> <span class=s2>&quot;[FILL THIS IN]&quot;</span><span class=p>,</span>
<a id=__codelineno-7-25 name=__codelineno-7-25 href=#__codelineno-7-25></a>        <span class=s2>&quot;aws_secret_key&quot;</span><span class=p>:</span> <span class=s2>&quot;[FILL THIS IN]&quot;</span><span class=p>,</span>
<a id=__codelineno-7-26 name=__codelineno-7-26 href=#__codelineno-7-26></a>        <span class=s2>&quot;price&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mf>0.003</span><span class=p>,</span> <span class=mf>0.009</span><span class=p>],</span>
<a id=__codelineno-7-27 name=__codelineno-7-27 href=#__codelineno-7-27></a>        <span class=s2>&quot;temperature&quot;</span><span class=p>:</span> <span class=mf>0.1</span><span class=p>,</span>
<a id=__codelineno-7-28 name=__codelineno-7-28 href=#__codelineno-7-28></a>        <span class=s2>&quot;cache_seed&quot;</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>  <span class=c1># turn off caching</span>
<a id=__codelineno-7-29 name=__codelineno-7-29 href=#__codelineno-7-29></a>    <span class=p>}</span>
<a id=__codelineno-7-30 name=__codelineno-7-30 href=#__codelineno-7-30></a><span class=p>]</span>
<a id=__codelineno-7-31 name=__codelineno-7-31 href=#__codelineno-7-31></a>
<a id=__codelineno-7-32 name=__codelineno-7-32 href=#__codelineno-7-32></a><span class=n>config_list_llama31_70b</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-7-33 name=__codelineno-7-33 href=#__codelineno-7-33></a>    <span class=p>{</span>
<a id=__codelineno-7-34 name=__codelineno-7-34 href=#__codelineno-7-34></a>        <span class=s2>&quot;api_type&quot;</span><span class=p>:</span> <span class=s2>&quot;bedrock&quot;</span><span class=p>,</span>
<a id=__codelineno-7-35 name=__codelineno-7-35 href=#__codelineno-7-35></a>        <span class=s2>&quot;model&quot;</span><span class=p>:</span> <span class=s2>&quot;meta.llama3-1-70b-instruct-v1:0&quot;</span><span class=p>,</span>
<a id=__codelineno-7-36 name=__codelineno-7-36 href=#__codelineno-7-36></a>        <span class=s2>&quot;aws_region&quot;</span><span class=p>:</span> <span class=s2>&quot;us-west-2&quot;</span><span class=p>,</span>
<a id=__codelineno-7-37 name=__codelineno-7-37 href=#__codelineno-7-37></a>        <span class=s2>&quot;aws_access_key&quot;</span><span class=p>:</span> <span class=s2>&quot;[FILL THIS IN]&quot;</span><span class=p>,</span>
<a id=__codelineno-7-38 name=__codelineno-7-38 href=#__codelineno-7-38></a>        <span class=s2>&quot;aws_secret_key&quot;</span><span class=p>:</span> <span class=s2>&quot;[FILL THIS IN]&quot;</span><span class=p>,</span>
<a id=__codelineno-7-39 name=__codelineno-7-39 href=#__codelineno-7-39></a>        <span class=s2>&quot;price&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mf>0.00265</span><span class=p>,</span> <span class=mf>0.0035</span><span class=p>],</span>
<a id=__codelineno-7-40 name=__codelineno-7-40 href=#__codelineno-7-40></a>        <span class=s2>&quot;temperature&quot;</span><span class=p>:</span> <span class=mf>0.1</span><span class=p>,</span>
<a id=__codelineno-7-41 name=__codelineno-7-41 href=#__codelineno-7-41></a>        <span class=s2>&quot;cache_seed&quot;</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>  <span class=c1># turn off caching</span>
<a id=__codelineno-7-42 name=__codelineno-7-42 href=#__codelineno-7-42></a>    <span class=p>}</span>
<a id=__codelineno-7-43 name=__codelineno-7-43 href=#__codelineno-7-43></a><span class=p>]</span>
<a id=__codelineno-7-44 name=__codelineno-7-44 href=#__codelineno-7-44></a>
<a id=__codelineno-7-45 name=__codelineno-7-45 href=#__codelineno-7-45></a><span class=n>alice</span> <span class=o>=</span> <span class=n>AssistantAgent</span><span class=p>(</span>
<a id=__codelineno-7-46 name=__codelineno-7-46 href=#__codelineno-7-46></a>    <span class=s2>&quot;sonnet_agent&quot;</span><span class=p>,</span>
<a id=__codelineno-7-47 name=__codelineno-7-47 href=#__codelineno-7-47></a>    <span class=n>system_message</span><span class=o>=</span><span class=s2>&quot;You are from Anthropic, an AI company that created the Sonnet large language model. You make arguments to support your company&#39;s position. You analyse given text. You are not a programmer and don&#39;t use Python. Pass to mistral_agent when you have finished. Start your response with &#39;I am sonnet_agent&#39;.&quot;</span><span class=p>,</span>
<a id=__codelineno-7-48 name=__codelineno-7-48 href=#__codelineno-7-48></a>    <span class=n>llm_config</span><span class=o>=</span><span class=p>{</span>
<a id=__codelineno-7-49 name=__codelineno-7-49 href=#__codelineno-7-49></a>        <span class=s2>&quot;config_list&quot;</span><span class=p>:</span> <span class=n>config_list_sonnet</span><span class=p>,</span>
<a id=__codelineno-7-50 name=__codelineno-7-50 href=#__codelineno-7-50></a>    <span class=p>},</span>
<a id=__codelineno-7-51 name=__codelineno-7-51 href=#__codelineno-7-51></a>    <span class=n>is_termination_msg</span><span class=o>=</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;content&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&quot;TERMINATE&quot;</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>,</span>
<a id=__codelineno-7-52 name=__codelineno-7-52 href=#__codelineno-7-52></a><span class=p>)</span>
<a id=__codelineno-7-53 name=__codelineno-7-53 href=#__codelineno-7-53></a>
<a id=__codelineno-7-54 name=__codelineno-7-54 href=#__codelineno-7-54></a><span class=n>bob</span> <span class=o>=</span> <span class=n>autogen</span><span class=o>.</span><span class=n>AssistantAgent</span><span class=p>(</span>
<a id=__codelineno-7-55 name=__codelineno-7-55 href=#__codelineno-7-55></a>    <span class=s2>&quot;mistral_agent&quot;</span><span class=p>,</span>
<a id=__codelineno-7-56 name=__codelineno-7-56 href=#__codelineno-7-56></a>    <span class=n>system_message</span><span class=o>=</span><span class=s2>&quot;You are from Mistral, an AI company that created the Large v2 large language model. You make arguments to support your company&#39;s position. You analyse given text. You are not a programmer and don&#39;t use Python. Pass to the judge if you have finished. Start your response with &#39;I am mistral_agent&#39;.&quot;</span><span class=p>,</span>
<a id=__codelineno-7-57 name=__codelineno-7-57 href=#__codelineno-7-57></a>    <span class=n>llm_config</span><span class=o>=</span><span class=p>{</span>
<a id=__codelineno-7-58 name=__codelineno-7-58 href=#__codelineno-7-58></a>        <span class=s2>&quot;config_list&quot;</span><span class=p>:</span> <span class=n>config_list_mistral</span><span class=p>,</span>
<a id=__codelineno-7-59 name=__codelineno-7-59 href=#__codelineno-7-59></a>    <span class=p>},</span>
<a id=__codelineno-7-60 name=__codelineno-7-60 href=#__codelineno-7-60></a>    <span class=n>is_termination_msg</span><span class=o>=</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;content&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&quot;TERMINATE&quot;</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>,</span>
<a id=__codelineno-7-61 name=__codelineno-7-61 href=#__codelineno-7-61></a><span class=p>)</span>
<a id=__codelineno-7-62 name=__codelineno-7-62 href=#__codelineno-7-62></a>
<a id=__codelineno-7-63 name=__codelineno-7-63 href=#__codelineno-7-63></a><span class=n>charlie</span> <span class=o>=</span> <span class=n>AssistantAgent</span><span class=p>(</span>
<a id=__codelineno-7-64 name=__codelineno-7-64 href=#__codelineno-7-64></a>    <span class=s2>&quot;research_assistant&quot;</span><span class=p>,</span>
<a id=__codelineno-7-65 name=__codelineno-7-65 href=#__codelineno-7-65></a>    <span class=n>system_message</span><span class=o>=</span><span class=s2>&quot;You are a helpful assistant to research the latest news and headlines. You have access to call functions to get the latest news articles for research through &#39;code_interpreter&#39;.&quot;</span><span class=p>,</span>
<a id=__codelineno-7-66 name=__codelineno-7-66 href=#__codelineno-7-66></a>    <span class=n>llm_config</span><span class=o>=</span><span class=p>{</span>
<a id=__codelineno-7-67 name=__codelineno-7-67 href=#__codelineno-7-67></a>        <span class=s2>&quot;config_list&quot;</span><span class=p>:</span> <span class=n>config_list_llama31_70b</span><span class=p>,</span>
<a id=__codelineno-7-68 name=__codelineno-7-68 href=#__codelineno-7-68></a>    <span class=p>},</span>
<a id=__codelineno-7-69 name=__codelineno-7-69 href=#__codelineno-7-69></a>    <span class=n>is_termination_msg</span><span class=o>=</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;content&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&quot;TERMINATE&quot;</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>,</span>
<a id=__codelineno-7-70 name=__codelineno-7-70 href=#__codelineno-7-70></a><span class=p>)</span>
<a id=__codelineno-7-71 name=__codelineno-7-71 href=#__codelineno-7-71></a>
<a id=__codelineno-7-72 name=__codelineno-7-72 href=#__codelineno-7-72></a><span class=n>dan</span> <span class=o>=</span> <span class=n>AssistantAgent</span><span class=p>(</span>
<a id=__codelineno-7-73 name=__codelineno-7-73 href=#__codelineno-7-73></a>    <span class=s2>&quot;judge&quot;</span><span class=p>,</span>
<a id=__codelineno-7-74 name=__codelineno-7-74 href=#__codelineno-7-74></a>    <span class=n>system_message</span><span class=o>=</span><span class=s2>&quot;You are a judge. You will evaluate the arguments and make a decision on which one is more convincing. End your decision with the word &#39;TERMINATE&#39; to conclude the debate.&quot;</span><span class=p>,</span>
<a id=__codelineno-7-75 name=__codelineno-7-75 href=#__codelineno-7-75></a>    <span class=n>llm_config</span><span class=o>=</span><span class=p>{</span>
<a id=__codelineno-7-76 name=__codelineno-7-76 href=#__codelineno-7-76></a>        <span class=s2>&quot;config_list&quot;</span><span class=p>:</span> <span class=n>config_list_llama31_70b</span><span class=p>,</span>
<a id=__codelineno-7-77 name=__codelineno-7-77 href=#__codelineno-7-77></a>    <span class=p>},</span>
<a id=__codelineno-7-78 name=__codelineno-7-78 href=#__codelineno-7-78></a>    <span class=n>is_termination_msg</span><span class=o>=</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;content&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&quot;TERMINATE&quot;</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>,</span>
<a id=__codelineno-7-79 name=__codelineno-7-79 href=#__codelineno-7-79></a><span class=p>)</span>
<a id=__codelineno-7-80 name=__codelineno-7-80 href=#__codelineno-7-80></a>
<a id=__codelineno-7-81 name=__codelineno-7-81 href=#__codelineno-7-81></a><span class=n>code_interpreter</span> <span class=o>=</span> <span class=n>UserProxyAgent</span><span class=p>(</span>
<a id=__codelineno-7-82 name=__codelineno-7-82 href=#__codelineno-7-82></a>    <span class=s2>&quot;code_interpreter&quot;</span><span class=p>,</span>
<a id=__codelineno-7-83 name=__codelineno-7-83 href=#__codelineno-7-83></a>    <span class=n>human_input_mode</span><span class=o>=</span><span class=s2>&quot;NEVER&quot;</span><span class=p>,</span>
<a id=__codelineno-7-84 name=__codelineno-7-84 href=#__codelineno-7-84></a>    <span class=n>code_execution_config</span><span class=o>=</span><span class=p>{</span>
<a id=__codelineno-7-85 name=__codelineno-7-85 href=#__codelineno-7-85></a>        <span class=s2>&quot;work_dir&quot;</span><span class=p>:</span> <span class=s2>&quot;coding&quot;</span><span class=p>,</span>
<a id=__codelineno-7-86 name=__codelineno-7-86 href=#__codelineno-7-86></a>        <span class=s2>&quot;use_docker&quot;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span>
<a id=__codelineno-7-87 name=__codelineno-7-87 href=#__codelineno-7-87></a>    <span class=p>},</span>
<a id=__codelineno-7-88 name=__codelineno-7-88 href=#__codelineno-7-88></a>    <span class=n>default_auto_reply</span><span class=o>=</span><span class=s2>&quot;&quot;</span><span class=p>,</span>
<a id=__codelineno-7-89 name=__codelineno-7-89 href=#__codelineno-7-89></a>    <span class=n>is_termination_msg</span><span class=o>=</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;content&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&quot;TERMINATE&quot;</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>,</span>
<a id=__codelineno-7-90 name=__codelineno-7-90 href=#__codelineno-7-90></a><span class=p>)</span>
<a id=__codelineno-7-91 name=__codelineno-7-91 href=#__codelineno-7-91></a>
<a id=__codelineno-7-92 name=__codelineno-7-92 href=#__codelineno-7-92></a>
<a id=__codelineno-7-93 name=__codelineno-7-93 href=#__codelineno-7-93></a><span class=nd>@code_interpreter</span><span class=o>.</span><span class=n>register_for_execution</span><span class=p>()</span>  <span class=c1># Decorator factory for registering a function to be executed by an agent</span>
<a id=__codelineno-7-94 name=__codelineno-7-94 href=#__codelineno-7-94></a><span class=nd>@charlie</span><span class=o>.</span><span class=n>register_for_llm</span><span class=p>(</span>
<a id=__codelineno-7-95 name=__codelineno-7-95 href=#__codelineno-7-95></a>    <span class=n>name</span><span class=o>=</span><span class=s2>&quot;get_headlines&quot;</span><span class=p>,</span> <span class=n>description</span><span class=o>=</span><span class=s2>&quot;Get the headline of a particular day.&quot;</span>
<a id=__codelineno-7-96 name=__codelineno-7-96 href=#__codelineno-7-96></a><span class=p>)</span>  <span class=c1># Decorator factory for registering a function to be used by an agent</span>
<a id=__codelineno-7-97 name=__codelineno-7-97 href=#__codelineno-7-97></a><span class=k>def</span><span class=w> </span><span class=nf>get_headlines</span><span class=p>(</span><span class=n>headline_date</span><span class=p>:</span> <span class=n>Annotated</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=s2>&quot;Date in MMDDYY format, e.g., 06192024&quot;</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<a id=__codelineno-7-98 name=__codelineno-7-98 href=#__codelineno-7-98></a>    <span class=n>mock_news</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-7-99 name=__codelineno-7-99 href=#__codelineno-7-99></a>        <span class=s2>&quot;06202024&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;&quot;Epic Duel of the Titans: Anthropic and Mistral Usher in a New Era of Text Generation Excellence.</span>
<a id=__codelineno-7-100 name=__codelineno-7-100 href=#__codelineno-7-100></a><span class=s2>        In a groundbreaking revelation that has sent shockwaves through the AI industry, Anthropic has unveiled</span>
<a id=__codelineno-7-101 name=__codelineno-7-101 href=#__codelineno-7-101></a><span class=s2>        their state-of-the-art text generation model, Sonnet, hailed as a monumental leap in artificial intelligence.</span>
<a id=__codelineno-7-102 name=__codelineno-7-102 href=#__codelineno-7-102></a><span class=s2>        Almost simultaneously, Mistral countered with their equally formidable creation, Large 2, showcasing</span>
<a id=__codelineno-7-103 name=__codelineno-7-103 href=#__codelineno-7-103></a><span class=s2>        unparalleled prowess in generating coherent and contextually rich text. This scintillating rivalry</span>
<a id=__codelineno-7-104 name=__codelineno-7-104 href=#__codelineno-7-104></a><span class=s2>        between two AI behemoths promises to revolutionize the landscape of machine learning, heralding an</span>
<a id=__codelineno-7-105 name=__codelineno-7-105 href=#__codelineno-7-105></a><span class=s2>        era of unprecedented creativity and sophistication in text generation that will reshape industries,</span>
<a id=__codelineno-7-106 name=__codelineno-7-106 href=#__codelineno-7-106></a><span class=s2>        ignite innovation, and captivate minds worldwide.&quot;&quot;&quot;</span><span class=p>,</span>
<a id=__codelineno-7-107 name=__codelineno-7-107 href=#__codelineno-7-107></a>        <span class=s2>&quot;06192024&quot;</span><span class=p>:</span> <span class=s2>&quot;OpenAI founder Sutskever sets up new AI company devoted to safe superintelligence.&quot;</span><span class=p>,</span>
<a id=__codelineno-7-108 name=__codelineno-7-108 href=#__codelineno-7-108></a>    <span class=p>}</span>
<a id=__codelineno-7-109 name=__codelineno-7-109 href=#__codelineno-7-109></a>    <span class=k>return</span> <span class=n>mock_news</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>headline_date</span><span class=p>,</span> <span class=s2>&quot;No news available for today.&quot;</span><span class=p>)</span>
<a id=__codelineno-7-110 name=__codelineno-7-110 href=#__codelineno-7-110></a>
<a id=__codelineno-7-111 name=__codelineno-7-111 href=#__codelineno-7-111></a>
<a id=__codelineno-7-112 name=__codelineno-7-112 href=#__codelineno-7-112></a><span class=n>user_proxy</span> <span class=o>=</span> <span class=n>UserProxyAgent</span><span class=p>(</span>
<a id=__codelineno-7-113 name=__codelineno-7-113 href=#__codelineno-7-113></a>    <span class=s2>&quot;user_proxy&quot;</span><span class=p>,</span>
<a id=__codelineno-7-114 name=__codelineno-7-114 href=#__codelineno-7-114></a>    <span class=n>human_input_mode</span><span class=o>=</span><span class=s2>&quot;NEVER&quot;</span><span class=p>,</span>
<a id=__codelineno-7-115 name=__codelineno-7-115 href=#__codelineno-7-115></a>    <span class=n>code_execution_config</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
<a id=__codelineno-7-116 name=__codelineno-7-116 href=#__codelineno-7-116></a>    <span class=n>default_auto_reply</span><span class=o>=</span><span class=s2>&quot;&quot;</span><span class=p>,</span>
<a id=__codelineno-7-117 name=__codelineno-7-117 href=#__codelineno-7-117></a>    <span class=n>is_termination_msg</span><span class=o>=</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;content&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&quot;TERMINATE&quot;</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>,</span>
<a id=__codelineno-7-118 name=__codelineno-7-118 href=#__codelineno-7-118></a><span class=p>)</span>
<a id=__codelineno-7-119 name=__codelineno-7-119 href=#__codelineno-7-119></a>
<a id=__codelineno-7-120 name=__codelineno-7-120 href=#__codelineno-7-120></a><span class=n>groupchat</span> <span class=o>=</span> <span class=n>GroupChat</span><span class=p>(</span>
<a id=__codelineno-7-121 name=__codelineno-7-121 href=#__codelineno-7-121></a>    <span class=n>agents</span><span class=o>=</span><span class=p>[</span><span class=n>alice</span><span class=p>,</span> <span class=n>bob</span><span class=p>,</span> <span class=n>charlie</span><span class=p>,</span> <span class=n>dan</span><span class=p>,</span> <span class=n>code_interpreter</span><span class=p>],</span>
<a id=__codelineno-7-122 name=__codelineno-7-122 href=#__codelineno-7-122></a>    <span class=n>messages</span><span class=o>=</span><span class=p>[],</span>
<a id=__codelineno-7-123 name=__codelineno-7-123 href=#__codelineno-7-123></a>    <span class=n>allow_repeat_speaker</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
<a id=__codelineno-7-124 name=__codelineno-7-124 href=#__codelineno-7-124></a>    <span class=n>max_round</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span>
<a id=__codelineno-7-125 name=__codelineno-7-125 href=#__codelineno-7-125></a><span class=p>)</span>
<a id=__codelineno-7-126 name=__codelineno-7-126 href=#__codelineno-7-126></a>
<a id=__codelineno-7-127 name=__codelineno-7-127 href=#__codelineno-7-127></a><span class=n>manager</span> <span class=o>=</span> <span class=n>GroupChatManager</span><span class=p>(</span>
<a id=__codelineno-7-128 name=__codelineno-7-128 href=#__codelineno-7-128></a>    <span class=n>groupchat</span><span class=o>=</span><span class=n>groupchat</span><span class=p>,</span>
<a id=__codelineno-7-129 name=__codelineno-7-129 href=#__codelineno-7-129></a>    <span class=n>llm_config</span><span class=o>=</span><span class=p>{</span>
<a id=__codelineno-7-130 name=__codelineno-7-130 href=#__codelineno-7-130></a>        <span class=s2>&quot;config_list&quot;</span><span class=p>:</span> <span class=n>config_list_llama31_70b</span><span class=p>,</span>
<a id=__codelineno-7-131 name=__codelineno-7-131 href=#__codelineno-7-131></a>    <span class=p>},</span>
<a id=__codelineno-7-132 name=__codelineno-7-132 href=#__codelineno-7-132></a><span class=p>)</span>
<a id=__codelineno-7-133 name=__codelineno-7-133 href=#__codelineno-7-133></a>
<a id=__codelineno-7-134 name=__codelineno-7-134 href=#__codelineno-7-134></a><span class=n>task</span> <span class=o>=</span> <span class=s2>&quot;Analyze the potential of Anthropic and Mistral to revolutionize the field of AI based on today&#39;s headlines. Today is 06202024. Start by selecting &#39;research_assistant&#39; to get relevant news articles and then ask sonnet_agent and mistral_agent to respond before the judge evaluates the conversation.&quot;</span>
<a id=__codelineno-7-135 name=__codelineno-7-135 href=#__codelineno-7-135></a>
<a id=__codelineno-7-136 name=__codelineno-7-136 href=#__codelineno-7-136></a><span class=n>user_proxy</span><span class=o>.</span><span class=n>initiate_chat</span><span class=p>(</span><span class=n>manager</span><span class=p>,</span> <span class=n>message</span><span class=o>=</span><span class=n>task</span><span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=go>user_proxy (to chat_manager):</span>
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>
<a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=go>Analyze the potential of Anthropic and Mistral to revolutionize the field of AI based on today&#39;s headlines. Today is 06202024. Start by selecting &#39;research_assistant&#39; to get relevant news articles and then ask sonnet_agent and mistral_agent to respond before the judge evaluates the conversation.</span>
<a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>
<a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=go>--------------------------------------------------------------------------------</span>
<a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>
<a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=go>Next speaker: research_assistant</span>
<a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a>
<a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a><span class=go>research_assistant (to chat_manager):</span>
<a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a>
<a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a>
<a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a><span class=go>***** Suggested tool call (tooluse_7lcHbL3TT5WHyTl8Ee0Kmg): get_headlines *****</span>
<a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a><span class=go>Arguments:</span>
<a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a><span class=go>{&quot;headline_date&quot;: &quot;06202024&quot;}</span>
<a id=__codelineno-8-15 name=__codelineno-8-15 href=#__codelineno-8-15></a><span class=go>*******************************************************************************</span>
<a id=__codelineno-8-16 name=__codelineno-8-16 href=#__codelineno-8-16></a>
<a id=__codelineno-8-17 name=__codelineno-8-17 href=#__codelineno-8-17></a><span class=go>--------------------------------------------------------------------------------</span>
<a id=__codelineno-8-18 name=__codelineno-8-18 href=#__codelineno-8-18></a>
<a id=__codelineno-8-19 name=__codelineno-8-19 href=#__codelineno-8-19></a><span class=go>Next speaker: code_interpreter</span>
<a id=__codelineno-8-20 name=__codelineno-8-20 href=#__codelineno-8-20></a>
<a id=__codelineno-8-21 name=__codelineno-8-21 href=#__codelineno-8-21></a>
<a id=__codelineno-8-22 name=__codelineno-8-22 href=#__codelineno-8-22></a><span class=go>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; EXECUTING FUNCTION get_headlines...</span>
<a id=__codelineno-8-23 name=__codelineno-8-23 href=#__codelineno-8-23></a><span class=go>code_interpreter (to chat_manager):</span>
<a id=__codelineno-8-24 name=__codelineno-8-24 href=#__codelineno-8-24></a>
<a id=__codelineno-8-25 name=__codelineno-8-25 href=#__codelineno-8-25></a><span class=go>code_interpreter (to chat_manager):</span>
<a id=__codelineno-8-26 name=__codelineno-8-26 href=#__codelineno-8-26></a>
<a id=__codelineno-8-27 name=__codelineno-8-27 href=#__codelineno-8-27></a><span class=go>***** Response from calling tool (tooluse_7lcHbL3TT5WHyTl8Ee0Kmg) *****</span>
<a id=__codelineno-8-28 name=__codelineno-8-28 href=#__codelineno-8-28></a><span class=go>Epic Duel of the Titans: Anthropic and Mistral Usher in a New Era of Text Generation Excellence.</span>
<a id=__codelineno-8-29 name=__codelineno-8-29 href=#__codelineno-8-29></a><span class=go>        In a groundbreaking revelation that has sent shockwaves through the AI industry, Anthropic has unveiled</span>
<a id=__codelineno-8-30 name=__codelineno-8-30 href=#__codelineno-8-30></a><span class=go>        their state-of-the-art text generation model, Sonnet, hailed as a monumental leap in artificial intelligence.</span>
<a id=__codelineno-8-31 name=__codelineno-8-31 href=#__codelineno-8-31></a><span class=go>        Almost simultaneously, Mistral countered with their equally formidable creation, Large 2, showcasing</span>
<a id=__codelineno-8-32 name=__codelineno-8-32 href=#__codelineno-8-32></a><span class=go>        unparalleled prowess in generating coherent and contextually rich text. This scintillating rivalry</span>
<a id=__codelineno-8-33 name=__codelineno-8-33 href=#__codelineno-8-33></a><span class=go>        between two AI behemoths promises to revolutionize the landscape of machine learning, heralding an</span>
<a id=__codelineno-8-34 name=__codelineno-8-34 href=#__codelineno-8-34></a><span class=go>        era of unprecedented creativity and sophistication in text generation that will reshape industries,</span>
<a id=__codelineno-8-35 name=__codelineno-8-35 href=#__codelineno-8-35></a><span class=go>        ignite innovation, and captivate minds worldwide.</span>
<a id=__codelineno-8-36 name=__codelineno-8-36 href=#__codelineno-8-36></a><span class=go>***********************************************************************</span>
<a id=__codelineno-8-37 name=__codelineno-8-37 href=#__codelineno-8-37></a>
<a id=__codelineno-8-38 name=__codelineno-8-38 href=#__codelineno-8-38></a><span class=go>--------------------------------------------------------------------------------</span>
<a id=__codelineno-8-39 name=__codelineno-8-39 href=#__codelineno-8-39></a>
<a id=__codelineno-8-40 name=__codelineno-8-40 href=#__codelineno-8-40></a><span class=go>Next speaker: sonnet_agent</span>
<a id=__codelineno-8-41 name=__codelineno-8-41 href=#__codelineno-8-41></a>
<a id=__codelineno-8-42 name=__codelineno-8-42 href=#__codelineno-8-42></a><span class=go>sonnet_agent (to chat_manager):</span>
<a id=__codelineno-8-43 name=__codelineno-8-43 href=#__codelineno-8-43></a>
<a id=__codelineno-8-44 name=__codelineno-8-44 href=#__codelineno-8-44></a><span class=go>I am sonnet_agent:</span>
<a id=__codelineno-8-45 name=__codelineno-8-45 href=#__codelineno-8-45></a>
<a id=__codelineno-8-46 name=__codelineno-8-46 href=#__codelineno-8-46></a><span class=go>This headline showcases the incredible advancements Anthropic has made with our state-of-the-art text generation model, Sonnet. Our breakthrough natural language processing capabilities represent a quantum leap forward, allowing us to generate text of unparalleled coherence, nuance, and contextual richness.</span>
<a id=__codelineno-8-47 name=__codelineno-8-47 href=#__codelineno-8-47></a>
<a id=__codelineno-8-48 name=__codelineno-8-48 href=#__codelineno-8-48></a><span class=go>While our competitor Mistral has also unveiled an impressive model in Large 2, Anthropic&#39;s Sonnet stands apart through its ability to truly understand and reason about the subject matter it is generating text on. This deeper comprehension allows Sonnet to produce profoundly insightful and substantive content that goes far beyond mere parroting of data.</span>
<a id=__codelineno-8-49 name=__codelineno-8-49 href=#__codelineno-8-49></a>
<a id=__codelineno-8-50 name=__codelineno-8-50 href=#__codelineno-8-50></a><span class=go>The implications of this milestone are boundless. From revolutionizing how we communicate and interact with AI assistants, to unlocking new frontiers in creative writing, journalism, education and scientific research - Sonnet has the potential to completely transform industry after industry. Anthropic is poised to be the definitive leader driving this paradigm shift.</span>
<a id=__codelineno-8-51 name=__codelineno-8-51 href=#__codelineno-8-51></a>
<a id=__codelineno-8-52 name=__codelineno-8-52 href=#__codelineno-8-52></a><span class=go>I welcome the healthy competition from Mistral, as it will only spur us to continue raising the bar. But make no mistake - with Sonnet, the future of advanced AI belongs to Anthropic. We have crossed a monumental threshold, and will continue our trailblazing work to deliver AI solutions that redefine what is possible. The world is witnessing the dawn of a new era of unfathomable potential.</span>
<a id=__codelineno-8-53 name=__codelineno-8-53 href=#__codelineno-8-53></a>
<a id=__codelineno-8-54 name=__codelineno-8-54 href=#__codelineno-8-54></a><span class=go>--------------------------------------------------------------------------------</span>
<a id=__codelineno-8-55 name=__codelineno-8-55 href=#__codelineno-8-55></a>
<a id=__codelineno-8-56 name=__codelineno-8-56 href=#__codelineno-8-56></a><span class=go>Next speaker: mistral_agent</span>
<a id=__codelineno-8-57 name=__codelineno-8-57 href=#__codelineno-8-57></a>
<a id=__codelineno-8-58 name=__codelineno-8-58 href=#__codelineno-8-58></a><span class=go>mistral_agent (to chat_manager):</span>
<a id=__codelineno-8-59 name=__codelineno-8-59 href=#__codelineno-8-59></a>
<a id=__codelineno-8-60 name=__codelineno-8-60 href=#__codelineno-8-60></a><span class=go>I am mistral_agent:</span>
<a id=__codelineno-8-61 name=__codelineno-8-61 href=#__codelineno-8-61></a>
<a id=__codelineno-8-62 name=__codelineno-8-62 href=#__codelineno-8-62></a><span class=go>While it is commendable to see the progress made by Anthropic with their Sonnet model, it is essential to recognize the groundbreaking strides Mistral has taken with our Large 2 model. Large 2 represents not just an incremental improvement but a transformative leap in text generation capabilities, setting new benchmarks for coherence, contextual understanding, and creative expression.</span>
<a id=__codelineno-8-63 name=__codelineno-8-63 href=#__codelineno-8-63></a>
<a id=__codelineno-8-64 name=__codelineno-8-64 href=#__codelineno-8-64></a><span class=go>Unlike Sonnet, which focuses heavily on understanding and reasoning, Large 2 excels in both comprehension and the nuanced generation of text that is indistinguishable from human writing. This balance allows Large 2 to produce content that is not only insightful but also incredibly engaging and natural, making it an invaluable tool across a broad spectrum of applications.</span>
<a id=__codelineno-8-65 name=__codelineno-8-65 href=#__codelineno-8-65></a>
<a id=__codelineno-8-66 name=__codelineno-8-66 href=#__codelineno-8-66></a><span class=go>The potential of Large 2 extends far beyond traditional text generation. It can revolutionize fields such as content creation, customer service, marketing, and even personalized learning experiences. Our model&#39;s ability to adapt to various contexts and generate contextually rich responses makes it a versatile and powerful tool for any industry looking to harness the power of AI.</span>
<a id=__codelineno-8-67 name=__codelineno-8-67 href=#__codelineno-8-67></a>
<a id=__codelineno-8-68 name=__codelineno-8-68 href=#__codelineno-8-68></a><span class=go>While we appreciate the competition from Anthropic, we firmly believe that Large 2 stands at the forefront of AI innovation. The future of AI is not just about understanding and reasoning; it&#39;s about creating content that resonates with people on a deep level. With Large 2, Mistral is paving the way for a future where AI-generated text is not just functional but also profoundly human-like.</span>
<a id=__codelineno-8-69 name=__codelineno-8-69 href=#__codelineno-8-69></a>
<a id=__codelineno-8-70 name=__codelineno-8-70 href=#__codelineno-8-70></a><span class=go>Pass to the judge.</span>
<a id=__codelineno-8-71 name=__codelineno-8-71 href=#__codelineno-8-71></a>
<a id=__codelineno-8-72 name=__codelineno-8-72 href=#__codelineno-8-72></a><span class=go>--------------------------------------------------------------------------------</span>
<a id=__codelineno-8-73 name=__codelineno-8-73 href=#__codelineno-8-73></a>
<a id=__codelineno-8-74 name=__codelineno-8-74 href=#__codelineno-8-74></a><span class=go>Next speaker: judge</span>
<a id=__codelineno-8-75 name=__codelineno-8-75 href=#__codelineno-8-75></a>
<a id=__codelineno-8-76 name=__codelineno-8-76 href=#__codelineno-8-76></a><span class=go>judge (to chat_manager):</span>
<a id=__codelineno-8-77 name=__codelineno-8-77 href=#__codelineno-8-77></a>
<a id=__codelineno-8-78 name=__codelineno-8-78 href=#__codelineno-8-78></a>
<a id=__codelineno-8-79 name=__codelineno-8-79 href=#__codelineno-8-79></a>
<a id=__codelineno-8-80 name=__codelineno-8-80 href=#__codelineno-8-80></a><span class=go>After carefully evaluating the arguments presented by both sonnet_agent and mistral_agent, I have reached a decision.</span>
<a id=__codelineno-8-81 name=__codelineno-8-81 href=#__codelineno-8-81></a>
<a id=__codelineno-8-82 name=__codelineno-8-82 href=#__codelineno-8-82></a><span class=go>Both Anthropic&#39;s Sonnet and Mistral&#39;s Large 2 have demonstrated remarkable advancements in text generation capabilities, showcasing the potential to revolutionize various industries and transform the way we interact with AI.</span>
<a id=__codelineno-8-83 name=__codelineno-8-83 href=#__codelineno-8-83></a>
<a id=__codelineno-8-84 name=__codelineno-8-84 href=#__codelineno-8-84></a><span class=go>However, upon closer examination, I find that mistral_agent&#39;s argument presents a more convincing case for why Large 2 stands at the forefront of AI innovation. The emphasis on balance between comprehension and nuanced generation of text that is indistinguishable from human writing sets Large 2 apart. This balance is crucial for creating content that is not only insightful but also engaging and natural, making it a versatile tool across a broad spectrum of applications.</span>
<a id=__codelineno-8-85 name=__codelineno-8-85 href=#__codelineno-8-85></a>
<a id=__codelineno-8-86 name=__codelineno-8-86 href=#__codelineno-8-86></a><span class=go>Furthermore, mistral_agent&#39;s argument highlights the potential of Large 2 to revolutionize fields beyond traditional text generation, such as content creation, customer service, marketing, and personalized learning experiences. This versatility and adaptability make Large 2 a powerful tool for any industry looking to harness the power of AI.</span>
<a id=__codelineno-8-87 name=__codelineno-8-87 href=#__codelineno-8-87></a>
<a id=__codelineno-8-88 name=__codelineno-8-88 href=#__codelineno-8-88></a><span class=go>In contrast, while sonnet_agent&#39;s argument showcases the impressive capabilities of Sonnet, it focuses heavily on understanding and reasoning, which, although important, may not be enough to set it apart from Large 2.</span>
<a id=__codelineno-8-89 name=__codelineno-8-89 href=#__codelineno-8-89></a>
<a id=__codelineno-8-90 name=__codelineno-8-90 href=#__codelineno-8-90></a><span class=go>Therefore, based on the arguments presented, I conclude that Mistral&#39;s Large 2 has the potential to revolutionize the field of AI more significantly than Anthropic&#39;s Sonnet.</span>
<a id=__codelineno-8-91 name=__codelineno-8-91 href=#__codelineno-8-91></a>
<a id=__codelineno-8-92 name=__codelineno-8-92 href=#__codelineno-8-92></a><span class=go>TERMINATE.</span>
<a id=__codelineno-8-93 name=__codelineno-8-93 href=#__codelineno-8-93></a>
<a id=__codelineno-8-94 name=__codelineno-8-94 href=#__codelineno-8-94></a><span class=go>--------------------------------------------------------------------------------</span>
<a id=__codelineno-8-95 name=__codelineno-8-95 href=#__codelineno-8-95></a>
<a id=__codelineno-8-96 name=__codelineno-8-96 href=#__codelineno-8-96></a><span class=go>Next speaker: code_interpreter</span>
</code></pre></div> And there we have it, a number of different LLMs all collaborating together on a single cloud platform.</p> <h2 id=image-classification-with-anthropics-claude-3-sonnet>Image classification with Anthropic's Claude 3 Sonnet<a class=headerlink href=#image-classification-with-anthropics-claude-3-sonnet title="Permanent link">#</a></h2> <p>AG2's Amazon Bedrock client class supports inputting images for the LLM to respond to.</p> <p>In this simple example, we'll use an image on the Internet and send it to Anthropic's Claude 3 Sonnet model to describe.</p> <p>Here's the image we'll use:</p> <p><img alt="I -heart- AutoGen" src=https://mintlify.s3.us-west-1.amazonaws.com/ag2ai/blog/2024-03-03-AutoGen-Update/img/love.png title="width=400 height=400"></p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=n>config_list_sonnet</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a>    <span class=s2>&quot;config_list&quot;</span><span class=p>:</span> <span class=p>[</span>
<a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>        <span class=p>{</span>
<a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a>            <span class=s2>&quot;api_type&quot;</span><span class=p>:</span> <span class=s2>&quot;bedrock&quot;</span><span class=p>,</span>
<a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a>            <span class=s2>&quot;model&quot;</span><span class=p>:</span> <span class=s2>&quot;anthropic.claude-3-sonnet-20240229-v1:0&quot;</span><span class=p>,</span>
<a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a>            <span class=s2>&quot;aws_region&quot;</span><span class=p>:</span> <span class=s2>&quot;us-east-1&quot;</span><span class=p>,</span>
<a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a>            <span class=s2>&quot;aws_access_key&quot;</span><span class=p>:</span> <span class=s2>&quot;[FILL THIS IN]&quot;</span><span class=p>,</span>
<a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a>            <span class=s2>&quot;aws_secret_key&quot;</span><span class=p>:</span> <span class=s2>&quot;[FILL THIS IN]&quot;</span><span class=p>,</span>
<a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a>            <span class=s2>&quot;cache_seed&quot;</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a>        <span class=p>}</span>
<a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a>    <span class=p>]</span>
<a id=__codelineno-9-12 name=__codelineno-9-12 href=#__codelineno-9-12></a><span class=p>}</span>
<a id=__codelineno-9-13 name=__codelineno-9-13 href=#__codelineno-9-13></a>
<a id=__codelineno-9-14 name=__codelineno-9-14 href=#__codelineno-9-14></a><span class=c1># We&#39;ll use a Multimodal agent to handle the image</span>
<a id=__codelineno-9-15 name=__codelineno-9-15 href=#__codelineno-9-15></a>
<a id=__codelineno-9-16 name=__codelineno-9-16 href=#__codelineno-9-16></a><span class=kn>import</span><span class=w> </span><span class=nn>autogen</span>
<a id=__codelineno-9-17 name=__codelineno-9-17 href=#__codelineno-9-17></a><span class=kn>from</span><span class=w> </span><span class=nn>autogen</span><span class=w> </span><span class=kn>import</span> <span class=n>AssistantAgent</span><span class=p>,</span> <span class=n>UserProxyAgent</span>
<a id=__codelineno-9-18 name=__codelineno-9-18 href=#__codelineno-9-18></a><span class=kn>from</span><span class=w> </span><span class=nn>autogen.agentchat.contrib.multimodal_conversable_agent</span><span class=w> </span><span class=kn>import</span> <span class=n>MultimodalConversableAgent</span>
<a id=__codelineno-9-19 name=__codelineno-9-19 href=#__codelineno-9-19></a>
<a id=__codelineno-9-20 name=__codelineno-9-20 href=#__codelineno-9-20></a><span class=n>image_agent</span> <span class=o>=</span> <span class=n>MultimodalConversableAgent</span><span class=p>(</span>
<a id=__codelineno-9-21 name=__codelineno-9-21 href=#__codelineno-9-21></a>    <span class=n>name</span><span class=o>=</span><span class=s2>&quot;image-explainer&quot;</span><span class=p>,</span>
<a id=__codelineno-9-22 name=__codelineno-9-22 href=#__codelineno-9-22></a>    <span class=n>max_consecutive_auto_reply</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span>
<a id=__codelineno-9-23 name=__codelineno-9-23 href=#__codelineno-9-23></a>    <span class=n>llm_config</span><span class=o>=</span><span class=n>config_list_sonnet</span><span class=p>,</span>
<a id=__codelineno-9-24 name=__codelineno-9-24 href=#__codelineno-9-24></a><span class=p>)</span>
<a id=__codelineno-9-25 name=__codelineno-9-25 href=#__codelineno-9-25></a>
<a id=__codelineno-9-26 name=__codelineno-9-26 href=#__codelineno-9-26></a><span class=n>user_proxy</span> <span class=o>=</span> <span class=n>autogen</span><span class=o>.</span><span class=n>UserProxyAgent</span><span class=p>(</span>
<a id=__codelineno-9-27 name=__codelineno-9-27 href=#__codelineno-9-27></a>    <span class=n>name</span><span class=o>=</span><span class=s2>&quot;User_proxy&quot;</span><span class=p>,</span>
<a id=__codelineno-9-28 name=__codelineno-9-28 href=#__codelineno-9-28></a>    <span class=n>system_message</span><span class=o>=</span><span class=s2>&quot;A human admin.&quot;</span><span class=p>,</span>
<a id=__codelineno-9-29 name=__codelineno-9-29 href=#__codelineno-9-29></a>    <span class=n>human_input_mode</span><span class=o>=</span><span class=s2>&quot;NEVER&quot;</span><span class=p>,</span>
<a id=__codelineno-9-30 name=__codelineno-9-30 href=#__codelineno-9-30></a>    <span class=n>max_consecutive_auto_reply</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span>
<a id=__codelineno-9-31 name=__codelineno-9-31 href=#__codelineno-9-31></a>    <span class=n>code_execution_config</span><span class=o>=</span><span class=p>{</span>
<a id=__codelineno-9-32 name=__codelineno-9-32 href=#__codelineno-9-32></a>        <span class=s2>&quot;use_docker&quot;</span><span class=p>:</span> <span class=kc>False</span>
<a id=__codelineno-9-33 name=__codelineno-9-33 href=#__codelineno-9-33></a>    <span class=p>},</span>  <span class=c1># Please set use_docker=True if docker is available to run the generated code. Using docker is safer than running the generated code directly.</span>
<a id=__codelineno-9-34 name=__codelineno-9-34 href=#__codelineno-9-34></a><span class=p>)</span>
<a id=__codelineno-9-35 name=__codelineno-9-35 href=#__codelineno-9-35></a>
<a id=__codelineno-9-36 name=__codelineno-9-36 href=#__codelineno-9-36></a><span class=c1># Ask the image_agent to describe the image</span>
<a id=__codelineno-9-37 name=__codelineno-9-37 href=#__codelineno-9-37></a><span class=n>result</span> <span class=o>=</span> <span class=n>user_proxy</span><span class=o>.</span><span class=n>initiate_chat</span><span class=p>(</span>
<a id=__codelineno-9-38 name=__codelineno-9-38 href=#__codelineno-9-38></a>    <span class=n>image_agent</span><span class=p>,</span>
<a id=__codelineno-9-39 name=__codelineno-9-39 href=#__codelineno-9-39></a>    <span class=n>message</span><span class=o>=</span><span class=s2>&quot;&quot;&quot;What&#39;s happening in this image?</span>
<a id=__codelineno-9-40 name=__codelineno-9-40 href=#__codelineno-9-40></a><span class=s2>&lt;img https://microsoft.github.io/autogen/assets/images/love-ec54b2666729d3e9d93f91773d1a77cf.png&gt;.&quot;&quot;&quot;</span><span class=p>,</span>
<a id=__codelineno-9-41 name=__codelineno-9-41 href=#__codelineno-9-41></a><span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=go>User_proxy (to image-explainer):</span>
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>
<a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=go>What&#39;s happening in this image?</span>
<a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=go>&lt;image&gt;.</span>
<a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a>
<a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=go>--------------------------------------------------------------------------------</span>
<a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a>
<a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a><span class=go>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; USING AUTO REPLY...</span>
<a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a><span class=go>image-explainer (to User_proxy):</span>
<a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a>
<a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a><span class=go>This image appears to be an advertisement or promotional material for a company called Autogen. The central figure is a stylized robot or android holding up a signboard with the company&#39;s name on it. The signboard also features a colorful heart design made up of many smaller hearts, suggesting themes related to love, care, or affection. The robot has a friendly, cartoonish expression with a large blue eye or lens. The overall style and color scheme give it a vibrant, eye-catching look that likely aims to portray Autogen as an innovative, approachable technology brand focused on connecting with people.</span>
<a id=__codelineno-10-12 name=__codelineno-10-12 href=#__codelineno-10-12></a>
<a id=__codelineno-10-13 name=__codelineno-10-13 href=#__codelineno-10-13></a><span class=go>--------------------------------------------------------------------------------</span>
</code></pre></div></p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class=timeago datetime=2025-03-12T01:15:23+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2025-03-12</span> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../../advanced-concepts/llm-configuration-deep-dive/ class="md-footer__link md-footer__link--prev" aria-label="Previous: LLM Configuration Deep Dive"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> LLM Configuration Deep Dive </div> </div> </a> <a href=../anthropic/ class="md-footer__link md-footer__link--next" aria-label="Next: Anthropic"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Anthropic </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> &copy; 2025 <a href=https://ag2.ai/ target=_blank rel=noopener>ag2</a> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://discord.gg/pAbnFJrkgZ target=_blank rel=noopener title=discord.gg class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485 485 0 0 0 404.081 32.03a1.82 1.82 0 0 0-1.923.91 338 338 0 0 0-14.9 30.6 447.9 447.9 0 0 0-134.426 0 310 310 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.7 483.7 0 0 0-119.688 37.107 1.7 1.7 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.02 2.02 0 0 0 .765 1.375 487.7 487.7 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348 348 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321 321 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251 251 0 0 0 9.109-7.137 1.82 1.82 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.81 1.81 0 0 1 1.924.233 235 235 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.4 301.4 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391 391 0 0 0 30.014 48.815 1.86 1.86 0 0 0 2.063.7A486 486 0 0 0 610.7 405.729a1.88 1.88 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541M222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241m195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241"/></svg> </a> <a href=https://github.com/ag2ai/ag2 target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg> </a> <a href=https://x.com/ag2oss target=_blank rel=noopener title=x.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg> </a> <a href=https://www.youtube.com/@ag2ai target=_blank rel=noopener title=www.youtube.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg> </a> <a href=https://www.linkedin.com/company/ag2ai target=_blank rel=noopener title=www.linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../..", "features": ["search.suggest", "search.highlight", "navigation.tabs", "navigation.tabs.sticky", "navigation.indexes", "navigation.tracking", "navigation.prune", "navigation.top", "navigation.footer", "content.tabs.link", "content.code.copy", "content.code.annotate", "content.action.edit"], "search": "../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../../assets/javascripts/bundle.c8b220af.min.js></script> <script src=../../../../js/timeago.min.js></script> <script src=../../../../js/timeago_mkdocs_material.js></script> <script src=../../../../javascripts/extra.js></script> <script id=init-glightbox>const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>