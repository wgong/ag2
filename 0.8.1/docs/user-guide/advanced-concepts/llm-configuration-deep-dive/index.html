<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A programming framework for agentic AI"><meta name=author content="Chi Wang & Qingyun Wu"><link href=http://docs.ag2.ai/latest/docs/user-guide/advanced-concepts/llm-configuration-deep-dive/ rel=canonical><link href=../conversation-patterns-deep-dive/ rel=prev><link href=../../models/amazon-bedrock/ rel=next><link rel=icon href=../../../../assets/img/favicon.svg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.7"><title>LLM Config Deep-dive - AG2</title><link rel=stylesheet href=../../../../assets/stylesheets/main.8608ea7d.min.css><link rel=stylesheet href=../../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../css/timeago.css><link rel=stylesheet href=../../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../../stylesheets/extra.aa8cf5.min.css><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-2GN2KN2CE4"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-2GN2KN2CE4",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-2GN2KN2CE4",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><meta http-equiv=Cache-Control content="no-cache, no-store, must-revalidate"><meta property=og:type content=website><meta property=og:title content="AG2 - LLM Config Deep-dive"><meta property=og:description content="A programming framework for agentic AI"><meta content=http://docs.ag2.ai/latest/docs/user-guide/advanced-concepts/llm-configuration-deep-dive/ property=og:url><meta property=og:image content=https://opengraph.githubassets.com/1671805243.560327/ag2ai/ag2><meta property=og:image:type content=image/png><meta property=og:image:width content=1200><meta property=og:image:height content=630><meta name=twitter:card content=summary_large_image><meta name=twitter:title content="AG2 - LLM Config Deep-dive"><meta name=twitter:description content="A programming framework for agentic AI"><meta name=twitter:image content=https://opengraph.githubassets.com/1671805243.560327/ag2ai/ag2><link href=../../../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style><script src=../../../../assets/javascripts/glightbox.min.js></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#llm-configuration class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> You're viewing the <strong class=primary-text>work in progress</strong> version of the documentation. Please click <a rel=me href=http://docs.ag2.ai><strong>here</strong></a> for the latest. </div> </aside> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> <div class="md-banner__inner md-grid md-typeset"> You're not viewing the latest version. <a href=../../../../..> <strong>Click here to go to latest.</strong> </a> </div> <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../../../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script> </aside> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../.. title=AG2 class="md-header__button md-logo" aria-label=AG2 data-md-component=logo> <img src=../../../../assets/img/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> AG2 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> LLM Config Deep-dive </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=custom data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ag2ai/ag2 title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> ag2ai/ag2 </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../.. class=md-tabs__link> Home </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../basic-concepts/installing-ag2/ class=md-tabs__link> User Guide </a> </li> <li class=md-tabs__item> <a href=../../../api-reference/autogen/AfterWork/ class=md-tabs__link> API References </a> </li> <li class=md-tabs__item> <a href=../../../contributor-guide/contributing/ class=md-tabs__link> Contributor Guide </a> </li> <li class=md-tabs__item> <a href=../../../faq/FAQ/ class=md-tabs__link> FAQs </a> </li> <li class=md-tabs__item> <a href=../../../ecosystem/agentops/ class=md-tabs__link> Ecosystem </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../.. title=AG2 class="md-nav__button md-logo" aria-label=AG2 data-md-component=logo> <img src=../../../../assets/img/logo.svg alt=logo> </a> AG2 </label> <div class=md-nav__source> <a href=https://github.com/ag2ai/ag2 title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> ag2ai/ag2 </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../.. class=md-nav__link> <span class=md-ellipsis> Home </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> User Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> User Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../basic-concepts/installing-ag2/ class=md-nav__link> <span class=md-ellipsis> Basic Concepts </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2 checked> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> <span class=md-ellipsis> Advanced Concepts </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Advanced Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../rag/ class=md-nav__link> <span class=md-ellipsis> RAG </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../groupchat/groupchat/ class=md-nav__link> <span class=md-ellipsis> GroupChat </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../swarm/deep-dive/ class=md-nav__link> <span class=md-ellipsis> Swarm </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../realtime-agent/ class=md-nav__link> <span class=md-ellipsis> RealtimeAgent </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../code-execution/ class=md-nav__link> <span class=md-ellipsis> Code Execution </span> </a> </li> <li class=md-nav__item> <a href=../conversation-patterns-deep-dive/ class=md-nav__link> <span class=md-ellipsis> Conversation Patterns Deep Dive </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> LLM Configuration Deep Dive </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> LLM Configuration Deep Dive </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction-to-config_list class=md-nav__link> <span class=md-ellipsis> Introduction to config_list </span> </a> <nav class=md-nav aria-label="Introduction to config_list"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#oai_config_list-pattern class=md-nav__link> <span class=md-ellipsis> OAI_CONFIG_LIST pattern </span> </a> </li> <li class=md-nav__item> <a href=#why-is-it-a-list class=md-nav__link> <span class=md-ellipsis> Why is it a list? </span> </a> </li> <li class=md-nav__item> <a href=#how-does-an-agent-decide-which-model-to-pick-out-of-the-list class=md-nav__link> <span class=md-ellipsis> How does an agent decide which model to pick out of the list? </span> </a> </li> <li class=md-nav__item> <a href=#config-list-filtering class=md-nav__link> <span class=md-ellipsis> Config list filtering </span> </a> </li> <li class=md-nav__item> <a href=#adding-http-client-in-llm_config-for-proxy class=md-nav__link> <span class=md-ellipsis> Adding http client in llm_config for proxy </span> </a> </li> <li class=md-nav__item> <a href=#using-azure-active-directory-aad-authentication class=md-nav__link> <span class=md-ellipsis> Using Azure Active Directory (AAD) Authentication </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#other-configuration-parameters class=md-nav__link> <span class=md-ellipsis> Other configuration parameters </span> </a> <nav class=md-nav aria-label="Other configuration parameters"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ag2-specific-parameters class=md-nav__link> <span class=md-ellipsis> AG2 specific parameters </span> </a> </li> <li class=md-nav__item> <a href=#extra-model-client-parameters class=md-nav__link> <span class=md-ellipsis> Extra model client parameters </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#example class=md-nav__link> <span class=md-ellipsis> Example </span> </a> </li> <li class=md-nav__item> <a href=#other-helpers-for-loading-a-config-list class=md-nav__link> <span class=md-ellipsis> Other helpers for loading a config list </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../models/amazon-bedrock/ class=md-nav__link> <span class=md-ellipsis> Model Providers </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../reference-agents/ class=md-nav__link> <span class=md-ellipsis> Reference Agents </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../reference-tools/ class=md-nav__link> <span class=md-ellipsis> Reference Tools </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../api-reference/autogen/AfterWork/ class=md-nav__link> <span class=md-ellipsis> API References </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../contributor-guide/contributing/ class=md-nav__link> <span class=md-ellipsis> Contributor Guide </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../faq/FAQ/ class=md-nav__link> <span class=md-ellipsis> FAQs </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../ecosystem/agentops/ class=md-nav__link> <span class=md-ellipsis> Ecosystem </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction-to-config_list class=md-nav__link> <span class=md-ellipsis> Introduction to config_list </span> </a> <nav class=md-nav aria-label="Introduction to config_list"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#oai_config_list-pattern class=md-nav__link> <span class=md-ellipsis> OAI_CONFIG_LIST pattern </span> </a> </li> <li class=md-nav__item> <a href=#why-is-it-a-list class=md-nav__link> <span class=md-ellipsis> Why is it a list? </span> </a> </li> <li class=md-nav__item> <a href=#how-does-an-agent-decide-which-model-to-pick-out-of-the-list class=md-nav__link> <span class=md-ellipsis> How does an agent decide which model to pick out of the list? </span> </a> </li> <li class=md-nav__item> <a href=#config-list-filtering class=md-nav__link> <span class=md-ellipsis> Config list filtering </span> </a> </li> <li class=md-nav__item> <a href=#adding-http-client-in-llm_config-for-proxy class=md-nav__link> <span class=md-ellipsis> Adding http client in llm_config for proxy </span> </a> </li> <li class=md-nav__item> <a href=#using-azure-active-directory-aad-authentication class=md-nav__link> <span class=md-ellipsis> Using Azure Active Directory (AAD) Authentication </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#other-configuration-parameters class=md-nav__link> <span class=md-ellipsis> Other configuration parameters </span> </a> <nav class=md-nav aria-label="Other configuration parameters"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ag2-specific-parameters class=md-nav__link> <span class=md-ellipsis> AG2 specific parameters </span> </a> </li> <li class=md-nav__item> <a href=#extra-model-client-parameters class=md-nav__link> <span class=md-ellipsis> Extra model client parameters </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#example class=md-nav__link> <span class=md-ellipsis> Example </span> </a> </li> <li class=md-nav__item> <a href=#other-helpers-for-loading-a-config-list class=md-nav__link> <span class=md-ellipsis> Other helpers for loading a config list </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/ag2ai/ag2/website/mkdocs/docs/docs/user-guide/advanced-concepts/llm-configuration-deep-dive.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m7 14.94 6.06-6.06 2.06 2.06L9.06 17H7zM12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m4.7-10.65-1 1-2.05-2.05 1-1c.21-.22.56-.22.77 0l1.28 1.28c.22.21.22.56 0 .77M12 2a10 10 0 0 1 10 10 10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2"/></svg> </a> <p>In this deep-dive we run through the LLM configuration in depth, including the useful <code>OAI_CONFIG_LIST</code> file.</p> <h1 id=llm-configuration>LLM Configuration<a class=headerlink href=#llm-configuration title="Permanent link">#</a></h1> <p>In AG2, agents use LLMs as key components to understand and react. To configure an agent's access to LLMs, you can specify an <code>llm_config</code> argument in its constructor. For example, the following snippet shows a configuration that uses <code>gpt-4o</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=kn>import</span><span class=w> </span><span class=nn>os</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=n>llm_config</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>    <span class=s2>&quot;config_list&quot;</span><span class=p>:</span> <span class=p>[{</span><span class=s2>&quot;api_type&quot;</span><span class=p>:</span> <span class=s2>&quot;openai&quot;</span><span class=p>,</span> <span class=s2>&quot;model&quot;</span><span class=p>:</span> <span class=s2>&quot;gpt-4o&quot;</span><span class=p>,</span> <span class=s2>&quot;api_key&quot;</span><span class=p>:</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>[</span><span class=s2>&quot;OPENAI_API_KEY&quot;</span><span class=p>]}],</span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=p>}</span>
</code></pre></div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>It is important to never commit secrets into your code, therefore we read the OpenAI API key from an environment variable.</p> </div> <p>This <code>llm_config</code> can then be passed to an agent's constructor to enable it to use the LLM.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=kn>import</span><span class=w> </span><span class=nn>autogen</span>
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=n>assistant</span> <span class=o>=</span> <span class=n>autogen</span><span class=o>.</span><span class=n>AssistantAgent</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&quot;assistant&quot;</span><span class=p>,</span> <span class=n>llm_config</span><span class=o>=</span><span class=n>llm_config</span><span class=p>)</span>
</code></pre></div> <h2 id=introduction-to-config_list>Introduction to <code>config_list</code><a class=headerlink href=#introduction-to-config_list title="Permanent link">#</a></h2> <p>Different tasks may require different models, and the <code>config_list</code> allows specifying the different endpoints and configurations that are to be used. It is a list of dictionaries, each of which contains the following keys depending on the kind of endpoint being used:</p> <div class="tabbed-set tabbed-alternate" data-tabs=1:3><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><input id=__tabbed_1_3 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1>OpenAI</label><label for=__tabbed_1_2>Azure OpenAI</label><label for=__tabbed_1_3>Other OpenAI compatible</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li> <ul> <li><code>model</code> (str, required): The identifier of the model to be used, such as 'gpt-4o', 'gpt-4o-mini'.</li> <li><code>api_key</code> (str, optional): The API key required for authenticating requests to the model's API endpoint.</li> <li><code>base_url</code> (str, optional): The base URL of the API endpoint. This is the root address where API calls are directed.</li> <li><code>tags</code> (List[str], optional): Tags which can be used for filtering.</li> </ul> <p><code>api_type</code> (str, required): The model provider</p> <p>Example: <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=p>[</span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=w>  </span><span class=p>{</span>
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=w>    </span><span class=nt>&quot;api_type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;openai&quot;</span><span class=p>,</span>
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=w>    </span><span class=nt>&quot;model&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;gpt-4o&quot;</span><span class=p>,</span>
<a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=w>    </span><span class=nt>&quot;api_key&quot;</span><span class=p>:</span><span class=w> </span><span class=err>os.e</span><span class=kc>n</span><span class=err>viro</span><span class=kc>n</span><span class=p>[</span><span class=err>&#39;OPENAI_API_KEY&#39;</span><span class=p>]</span>
<a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=p>]</span>
</code></pre></div></p> </li> </ul> </div> <div class=tabbed-block> <ul> <li> <ul> <li><code>api_key</code> (str, optional): The API key required for authenticating requests to the model's API endpoint.</li> <li><code>api_type</code>: <code>azure</code></li> <li><code>base_url</code> (str, optional): The base URL of the API endpoint. This is the root address where API calls are directed.</li> <li><code>api_version</code> (str, optional): The version of the Azure API you wish to use.</li> <li><code>tags</code> (List[str], optional): Tags which can be used for filtering.</li> </ul> <p><code>model</code> (str, required): The deployment to be used. The model corresponds to the deployment name on Azure OpenAI.</p> <p>Example: <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=p>[</span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=w>  </span><span class=p>{</span>
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>    </span><span class=nt>&quot;model&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;my-gpt-4o-deployment&quot;</span><span class=p>,</span>
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=w>    </span><span class=nt>&quot;api_type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;azure&quot;</span><span class=p>,</span>
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=w>    </span><span class=nt>&quot;api_key&quot;</span><span class=p>:</span><span class=w> </span><span class=err>os.e</span><span class=kc>n</span><span class=err>viro</span><span class=kc>n</span><span class=p>[</span><span class=err>&#39;AZURE_OPENAI_API_KEY&#39;</span><span class=p>],</span>
<a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=w>    </span><span class=nt>&quot;base_url&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;https://ENDPOINT.openai.azure.com/&quot;</span><span class=p>,</span>
<a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=w>    </span><span class=nt>&quot;api_version&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2025-01-01&quot;</span>
<a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=p>]</span>
</code></pre></div></p> </li> </ul> </div> <div class=tabbed-block> <ul> <li> <ul> <li><code>api_key</code> (str, optional): The API key required for authenticating requests to the model's API endpoint.</li> <li><code>base_url</code> (str, optional): The base URL of the API endpoint. This is the root address where API calls are directed.</li> <li><code>tags</code> (List[str], optional): Tags which can be used for filtering.</li> </ul> <p><code>model</code> (str, required): The identifier of the model to be used, such as 'llama-7B'.</p> <p>Example: <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=p>[</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>  </span><span class=p>{</span>
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>    </span><span class=nt>&quot;api_type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;openai&quot;</span><span class=p>,</span>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=w>    </span><span class=nt>&quot;model&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;llama-7B&quot;</span><span class=p>,</span>
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=w>    </span><span class=nt>&quot;base_url&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;http://localhost:1234&quot;</span>
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=p>]</span>
</code></pre></div></p> </li> </ul> </div> </div> </div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>These will create a model client which assumes an OpenAI API (or compatible) endpoint. To use custom model clients, see <a href=https://github.com/ag2ai/ag2/blob/main/notebook/agentchat_custom_model.ipynb>here</a>.</p> </div> <h3 id=oai_config_list-pattern><code>OAI_CONFIG_LIST</code> pattern<a class=headerlink href=#oai_config_list-pattern title="Permanent link">#</a></h3> <p>A common, useful pattern used is to define this <code>config_list</code> via JSON (specified as a file or an environment variable set to a JSON-formatted string) and then use the <code>config_list_from_json</code> helper function to load it:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=n>config_list</span> <span class=o>=</span> <span class=n>autogen</span><span class=o>.</span><span class=n>config_list_from_json</span><span class=p>(</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>    <span class=n>env_or_file</span><span class=o>=</span><span class=s2>&quot;OAI_CONFIG_LIST&quot;</span><span class=p>,</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=p>)</span>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=c1># Then, create the assistant agent with the config list</span>
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=n>assistant</span> <span class=o>=</span> <span class=n>autogen</span><span class=o>.</span><span class=n>AssistantAgent</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&quot;assistant&quot;</span><span class=p>,</span> <span class=n>llm_config</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;config_list&quot;</span><span class=p>:</span> <span class=n>config_list</span><span class=p>})</span>
</code></pre></div> <p>This can be helpful as it keeps all the configuration in one place across different projects or notebooks.</p> <p>This function interprets the <code>env_or_file</code> argument as follows:</p> <ul> <li>If <code>env_or_file</code> is an environment variable then:<ul> <li>It will first try to load the file from the path specified in the environment variable.</li> <li>If there is no file, it will try to interpret the environment variable as a JSON string.</li> </ul> </li> <li>Otherwise, it will try to open the file at the path specified by <code>env_or_file</code>.</li> </ul> <h3 id=why-is-it-a-list>Why is it a list?<a class=headerlink href=#why-is-it-a-list title="Permanent link">#</a></h3> <p>Being a list allows you to define multiple models that can be used by the agent. This is useful for a few reasons:</p> <ul> <li>If one model times out or fails, the agent can try another model.</li> <li>Having a single global list of models and filtering it based on certain keys (e.g. name, tag) in order to pass select models into a certain agent (e.g. use cheaper GPT 4o-mini for agents solving easier tasks)</li> <li>While the core agents, (e.g. conversable or assistant) do not have special logic around selecting configs, some of the specialized agents <em>may</em> have logic to select the best model based on the task at hand.</li> </ul> <h3 id=how-does-an-agent-decide-which-model-to-pick-out-of-the-list>How does an agent decide which model to pick out of the list?<a class=headerlink href=#how-does-an-agent-decide-which-model-to-pick-out-of-the-list title="Permanent link">#</a></h3> <p>An agent uses the very first model available in the "config_list" and makes LLM calls against this model. If the model fails (e.g. API throttling) the agent will retry the request against the 2nd model and so on until prompt completion is received (or throws an error if none of the models successfully completes the request). In general there's no implicit/hidden logic inside agents that is used to pick "the best model for the task". However, some specialized agents may attempt to choose "the best model for the task". It is developers responsibility to pick the right models and use them with agents.</p> <h3 id=config-list-filtering>Config list filtering<a class=headerlink href=#config-list-filtering title="Permanent link">#</a></h3> <p>As described above the list can be filtered based on certain criteria. This is defined as a dictionary of key to filter on and values to filter by. For example, if you have a list of configs and you want to select the one with the model "gpt-4o-mini" you can use the following filter:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=n>filter_dict</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;model&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;gpt-4o-mini&quot;</span><span class=p>]}</span>
</code></pre></div> <p>This can then be applied to a config list loaded in Python with <code>filter_config</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=n>config_list</span> <span class=o>=</span> <span class=n>autogen</span><span class=o>.</span><span class=n>filter_config</span><span class=p>(</span><span class=n>config_list</span><span class=p>,</span> <span class=n>filter_dict</span><span class=p>)</span>
</code></pre></div> <p>Or, directly when loading the config list using <code>config_list_from_json</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=n>config_list</span> <span class=o>=</span> <span class=n>autogen</span><span class=o>.</span><span class=n>config_list_from_json</span><span class=p>(</span><span class=n>env_or_file</span><span class=o>=</span><span class=s2>&quot;OAI_CONFIG_LIST&quot;</span><span class=p>,</span> <span class=n>filter_dict</span><span class=o>=</span><span class=n>filter_dict</span><span class=p>)</span>
</code></pre></div> <h4 id=tags>Tags<a class=headerlink href=#tags title="Permanent link">#</a></h4> <p>Model names can differ between OpenAI and Azure OpenAI, so tags offer an easy way to smooth over this inconsistency. Tags are a list of strings in the <code>config_list</code>, for example for the following <code>config_list</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=n>config_list</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a>    <span class=p>{</span><span class=s2>&quot;api_type&quot;</span><span class=p>:</span> <span class=s2>&quot;openai&quot;</span><span class=p>,</span> <span class=s2>&quot;model&quot;</span><span class=p>:</span> <span class=s2>&quot;my-gpt-4o-deployment&quot;</span><span class=p>,</span> <span class=s2>&quot;api_key&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span> <span class=s2>&quot;tags&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;gpt4o&quot;</span><span class=p>,</span> <span class=s2>&quot;openai&quot;</span><span class=p>]},</span>
<a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>    <span class=p>{</span><span class=s2>&quot;api_type&quot;</span><span class=p>:</span> <span class=s2>&quot;openai&quot;</span><span class=p>,</span> <span class=s2>&quot;model&quot;</span><span class=p>:</span> <span class=s2>&quot;llama-7B&quot;</span><span class=p>,</span> <span class=s2>&quot;base_url&quot;</span><span class=p>:</span> <span class=s2>&quot;http://127.0.0.1:8080&quot;</span><span class=p>,</span> <span class=s2>&quot;tags&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;llama&quot;</span><span class=p>,</span> <span class=s2>&quot;local&quot;</span><span class=p>]},</span>
<a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=p>]</span>
</code></pre></div> <p>Then when filtering the <code>config_list</code> you can can specify the desired tags. A config is selected if it has at least one of the tags specified in the filter. For example, to just get the <code>llama</code> model, you can use the following filter:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=n>filter_dict</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;tags&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;llama&quot;</span><span class=p>,</span> <span class=s2>&quot;another_tag&quot;</span><span class=p>]}</span>
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=n>config_list</span> <span class=o>=</span> <span class=n>autogen</span><span class=o>.</span><span class=n>filter_config</span><span class=p>(</span><span class=n>config_list</span><span class=p>,</span> <span class=n>filter_dict</span><span class=p>)</span>
<a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=k>assert</span> <span class=nb>len</span><span class=p>(</span><span class=n>config_list</span><span class=p>)</span> <span class=o>==</span> <span class=mi>1</span>
</code></pre></div> <h3 id=adding-http-client-in-llm_config-for-proxy>Adding http client in llm_config for proxy<a class=headerlink href=#adding-http-client-in-llm_config-for-proxy title="Permanent link">#</a></h3> <p>In AG2, a deepcopy is used on llm_config to ensure that the llm_config passed by user is not modified internally. You may get an error if the llm_config contains objects of a class that do not support deepcopy. To fix this, you need to implement a <code>__deepcopy__</code> method for the class.</p> <p>The below example shows how to implement a <code>__deepcopy__</code> method for http client and add a proxy.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=ch>#!pip install httpx</span>
<a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=kn>import</span><span class=w> </span><span class=nn>httpx</span>
<a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a>
<a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a>
<a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=k>class</span><span class=w> </span><span class=nc>MyHttpClient</span><span class=p>(</span><span class=n>httpx</span><span class=o>.</span><span class=n>Client</span><span class=p>):</span>
<a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a>    <span class=k>def</span><span class=w> </span><span class=nf>__deepcopy__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>memo</span><span class=p>):</span>
<a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a>        <span class=k>return</span> <span class=bp>self</span>
<a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a>
<a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a>
<a id=__codelineno-11-10 name=__codelineno-11-10 href=#__codelineno-11-10></a><span class=n>config_list</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-11-11 name=__codelineno-11-11 href=#__codelineno-11-11></a>    <span class=p>{</span>
<a id=__codelineno-11-12 name=__codelineno-11-12 href=#__codelineno-11-12></a>        <span class=s2>&quot;api_type&quot;</span><span class=p>:</span> <span class=s2>&quot;openai&quot;</span><span class=p>,</span>
<a id=__codelineno-11-13 name=__codelineno-11-13 href=#__codelineno-11-13></a>        <span class=s2>&quot;model&quot;</span><span class=p>:</span> <span class=s2>&quot;my-gpt-4o-deployment&quot;</span><span class=p>,</span>
<a id=__codelineno-11-14 name=__codelineno-11-14 href=#__codelineno-11-14></a>        <span class=s2>&quot;api_key&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
<a id=__codelineno-11-15 name=__codelineno-11-15 href=#__codelineno-11-15></a>        <span class=s2>&quot;http_client&quot;</span><span class=p>:</span> <span class=n>MyHttpClient</span><span class=p>(</span><span class=n>proxy</span><span class=o>=</span><span class=s2>&quot;http://localhost:8030&quot;</span><span class=p>),</span>
<a id=__codelineno-11-16 name=__codelineno-11-16 href=#__codelineno-11-16></a>    <span class=p>}</span>
<a id=__codelineno-11-17 name=__codelineno-11-17 href=#__codelineno-11-17></a><span class=p>]</span>
<a id=__codelineno-11-18 name=__codelineno-11-18 href=#__codelineno-11-18></a>
<a id=__codelineno-11-19 name=__codelineno-11-19 href=#__codelineno-11-19></a><span class=n>llm_config</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-11-20 name=__codelineno-11-20 href=#__codelineno-11-20></a>    <span class=s2>&quot;config_list&quot;</span><span class=p>:</span> <span class=n>config_list</span><span class=p>,</span>
<a id=__codelineno-11-21 name=__codelineno-11-21 href=#__codelineno-11-21></a><span class=p>}</span>
</code></pre></div> <h3 id=using-azure-active-directory-aad-authentication>Using Azure Active Directory (AAD) Authentication<a class=headerlink href=#using-azure-active-directory-aad-authentication title="Permanent link">#</a></h3> <p>Azure Active Directory (AAD) provides secure access to resources and applications. Follow the steps below to configure AAD authentication for AG2.</p> <h4 id=prerequisites>Prerequisites<a class=headerlink href=#prerequisites title="Permanent link">#</a></h4> <ul> <li>An Azure subscription - <a href="https://azure.microsoft.com/en-us/pricing/purchase-options/azure-account?icid=azurefreeaccount">Create one for free</a>.</li> <li>Access granted to the Azure OpenAI Service in the desired Azure subscription.</li> <li>Appropriate permissions to register an application in AAD.</li> <li>Custom subdomain names are required to enable features like Microsoft Entra ID for authentication.</li> <li>Azure CLI - <a href=https://learn.microsoft.com/en-us/cli/azure/install-azure-cli>Installation Guide</a>.</li> </ul> <p>For more detailed and up-to-date instructions, please refer to the official <a href=https://learn.microsoft.com/en-us/azure/ai-services/openai/ >Azure OpenAI documentation</a>.</p> <h4 id=step-1-register-an-application-in-aad>Step 1: Register an Application in AAD<a class=headerlink href=#step-1-register-an-application-in-aad title="Permanent link">#</a></h4> <ol> <li>Navigate to the <a href=https://azure.microsoft.com/en-us/get-started/azure-portal>Azure portal</a>.</li> <li>Go to <code>Azure Active Directory</code> &gt; <code>App registrations</code>.</li> <li>Click on <code>New registration</code>.</li> <li>Enter a name for your application.</li> <li>Set the <code>Redirect URI</code> (optional).</li> <li>Click <code>Register</code>.</li> </ol> <p>For detailed instructions, refer to the official <a href="https://learn.microsoft.com/en-us/entra/identity-platform/quickstart-register-app?tabs=certificate">Azure AD Quickstart documentation</a>.</p> <h4 id=step-2-configure-api-permissions>Step 2: Configure API Permissions<a class=headerlink href=#step-2-configure-api-permissions title="Permanent link">#</a></h4> <ol> <li>After registration, go to <code>API permissions</code>.</li> <li>Click <code>Add a permission</code>.</li> <li>Select <code>Microsoft Graph</code> and then <code>Delegated permissions</code>.</li> <li>Add the necessary permissions (e.g., <code>User.Read</code>).</li> </ol> <p>For more details, see <a href=https://learn.microsoft.com/en-us/entra/identity-platform/permissions-consent-overview>API permissions in Microsoft Graph</a></p> <h4 id=step-3-obtain-client-id-and-tenant-id>Step 3: Obtain Client ID and Tenant ID<a class=headerlink href=#step-3-obtain-client-id-and-tenant-id title="Permanent link">#</a></h4> <ol> <li>Go to <code>Overview</code> of your registered application.</li> <li>Note down the <code>Application (client) ID</code> and <code>Directory (tenant) ID</code>.</li> </ol> <p>For more details, visit <a href="https://learn.microsoft.com/en-us/entra/identity-platform/quickstart-register-app?tabs=certificate">Register an application with the Microsoft identity platform</a></p> <h4 id=step-4-configure-your-application>Step 4: Configure Your Application<a class=headerlink href=#step-4-configure-your-application title="Permanent link">#</a></h4> <p>Use the obtained <code>Client ID</code> and <code>Tenant ID</code> in your application configuration. Heres an example of how to do this in your configuration file: <div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a>aad_config = {
<a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>    &quot;client_id&quot;: &quot;YOUR_CLIENT_ID&quot;,
<a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a>    &quot;tenant_id&quot;: &quot;YOUR_TENANT_ID&quot;,
<a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a>    &quot;authority&quot;: &quot;https://login.microsoftonline.com/YOUR_TENANT_ID&quot;,
<a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a>    &quot;scope&quot;: [&quot;https://graph.microsoft.com/.default&quot;],
<a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>}
</code></pre></div></p> <h4 id=step-5-authenticate-and-acquire-tokens>Step 5: Authenticate and Acquire Tokens<a class=headerlink href=#step-5-authenticate-and-acquire-tokens title="Permanent link">#</a></h4> <p>Use the following code to authenticate and acquire tokens:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a>from msal import ConfidentialClientApplication
<a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a>
<a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a>app = ConfidentialClientApplication(
<a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a>    client_id=aad_config[&quot;client_id&quot;],
<a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a>    client_credential=&quot;YOUR_CLIENT_SECRET&quot;,
<a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a>    authority=aad_config[&quot;authority&quot;]
<a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a>)
<a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a>
<a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a>result = app.acquire_token_for_client(scopes=aad_config[&quot;scope&quot;])
<a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a>
<a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a>if &quot;access_token&quot; in result:
<a id=__codelineno-13-12 name=__codelineno-13-12 href=#__codelineno-13-12></a>    print(&quot;Token acquired&quot;)
<a id=__codelineno-13-13 name=__codelineno-13-13 href=#__codelineno-13-13></a>else:
<a id=__codelineno-13-14 name=__codelineno-13-14 href=#__codelineno-13-14></a>    print(&quot;Error acquiring token:&quot;, result.get(&quot;error&quot;))
</code></pre></div> <p>For more details, refer to the <a href=https://learn.microsoft.com/en-us/azure/api-management/api-management-authenticate-authorize-azure-openai>Authenticate and authorize in Azure OpenAI Service</a> and <a href=https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/managed-identity>How to configure Azure OpenAI Service with Microsoft Entra ID authentication</a>.</p> <h4 id=step-6-configure-azure-openai-with-aad-auth-in-ag2>Step 6: Configure Azure OpenAI with AAD Auth in AG2<a class=headerlink href=#step-6-configure-azure-openai-with-aad-auth-in-ag2 title="Permanent link">#</a></h4> <p>To use AAD authentication with Azure OpenAI in AG2, configure the <code>llm_config</code> with the necessary parameters.</p> <p>Here is an example configuration:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a>llm_config = {
<a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a>    &quot;config_list&quot;: [
<a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a>        {
<a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a>            &quot;model&quot;: &quot;gpt-4&quot;,
<a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a>            &quot;base_url&quot;: &quot;YOUR_BASE_URL&quot;,
<a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a>            &quot;api_type&quot;: &quot;azure&quot;,
<a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a>            &quot;api_version&quot;: &quot;2025-01-01&quot;,
<a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a>            &quot;max_tokens&quot;: 1000,
<a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a>            &quot;azure_ad_token_provider&quot;: &quot;DEFAULT&quot;
<a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a>        }
<a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a>    ]
<a id=__codelineno-14-12 name=__codelineno-14-12 href=#__codelineno-14-12></a>}
</code></pre></div> <p>For more details, refer to the <a href=https://learn.microsoft.com/en-us/azure/api-management/api-management-authenticate-authorize-azure-openai>Authenticate and authorize in Azure OpenAI Service</a> and <a href=https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/managed-identity>How to configure Azure OpenAI Service with Microsoft Entra ID authentication</a>.</p> <p>In this configuration: - <code>model</code>: The Azure OpenAI deployment name. - <code>base_url</code>: The base URL of the Azure OpenAI endpoint. - <code>api_type</code>: Should be set to "azure". - <code>api_version</code>: The API version to use. - <code>azure_ad_token_provider</code>: Set to "DEFAULT" to use the default token provider.</p> <h4 id=example-of-initializing-an-assistant-agent-with-aad-auth>Example of Initializing an Assistant Agent with AAD Auth<a class=headerlink href=#example-of-initializing-an-assistant-agent-with-aad-auth title="Permanent link">#</a></h4> <div class=highlight><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a>import autogen
<a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a>
<a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a># Initialize the assistant agent with the AAD authenticated config
<a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a>assistant = autogen.AssistantAgent(name=&quot;assistant&quot;, llm_config=llm_config)
</code></pre></div> <h4 id=troubleshooting>Troubleshooting<a class=headerlink href=#troubleshooting title="Permanent link">#</a></h4> <p>If you encounter issues, check the following: - Ensure your <code>Client ID</code> and <code>Tenant ID</code> are correct. - Verify the permissions granted to your application. - Check network connectivity and Azure service status.</p> <p>This documentation provides a complete guide to configure and use AAD authentication with Azure OpenAI in AG2.</p> <h2 id=other-configuration-parameters>Other configuration parameters<a class=headerlink href=#other-configuration-parameters title="Permanent link">#</a></h2> <p>Besides the <code>config_list</code>, there are other parameters that can be used to configure the LLM. These are split between parameters specifically used by Autogen and those passed into the model client.</p> <h3 id=ag2-specific-parameters>AG2 specific parameters<a class=headerlink href=#ag2-specific-parameters title="Permanent link">#</a></h3> <ul> <li><code>cache_seed</code> - This is a legacy parameter and not recommended to be used unless the reason for using it is to disable the default caching behavior. To disable default caching, set this to <code>None</code>. Otherwise, by default or if an int is passed the DiskCache will be used. For the new way of using caching, pass a Cache object into <code>initiate_chat</code>.</li> </ul> <h3 id=extra-model-client-parameters>Extra model client parameters<a class=headerlink href=#extra-model-client-parameters title="Permanent link">#</a></h3> <p>It is also possible to passthrough parameters through to the OpenAI client. Parameters that correspond to the <a href=https://github.com/openai/openai-python/blob/d231d1fa783967c1d3a1db3ba1b52647fff148ac/src/openai/_client.py#L67><code>OpenAI</code> client</a> or the <a href=https://github.com/openai/openai-python/blob/d231d1fa783967c1d3a1db3ba1b52647fff148ac/src/openai/resources/completions.py#L35><code>OpenAI</code> completions create API</a> can be supplied.</p> <p>This is commonly used for things like <code>temperature</code>, or <code>timeout</code>.</p> <h2 id=example>Example<a class=headerlink href=#example title="Permanent link">#</a></h2> <div class=highlight><pre><span></span><code><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=n>llm_config</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a>    <span class=s2>&quot;config_list&quot;</span><span class=p>:</span> <span class=p>[</span>
<a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a>        <span class=p>{</span>
<a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a>            <span class=s2>&quot;model&quot;</span><span class=p>:</span> <span class=s2>&quot;my-gpt-4o-deployment&quot;</span><span class=p>,</span>
<a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a>            <span class=s2>&quot;api_key&quot;</span><span class=p>:</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AZURE_OPENAI_API_KEY&quot;</span><span class=p>),</span>
<a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a>            <span class=s2>&quot;api_type&quot;</span><span class=p>:</span> <span class=s2>&quot;azure&quot;</span><span class=p>,</span>
<a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a>            <span class=s2>&quot;base_url&quot;</span><span class=p>:</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AZURE_OPENAI_API_BASE&quot;</span><span class=p>),</span>
<a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a>            <span class=s2>&quot;api_version&quot;</span><span class=p>:</span> <span class=s2>&quot;2024-02-01&quot;</span><span class=p>,</span>
<a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a>        <span class=p>},</span>
<a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a>        <span class=p>{</span>
<a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a>            <span class=s2>&quot;api_type&quot;</span><span class=p>:</span> <span class=s2>&quot;openai&quot;</span><span class=p>,</span>
<a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a>            <span class=s2>&quot;model&quot;</span><span class=p>:</span> <span class=s2>&quot;llama-7B&quot;</span><span class=p>,</span>
<a id=__codelineno-16-13 name=__codelineno-16-13 href=#__codelineno-16-13></a>            <span class=s2>&quot;base_url&quot;</span><span class=p>:</span> <span class=s2>&quot;http://127.0.0.1:8080&quot;</span><span class=p>,</span>
<a id=__codelineno-16-14 name=__codelineno-16-14 href=#__codelineno-16-14></a>            <span class=s2>&quot;api_type&quot;</span><span class=p>:</span> <span class=s2>&quot;openai&quot;</span><span class=p>,</span>
<a id=__codelineno-16-15 name=__codelineno-16-15 href=#__codelineno-16-15></a>        <span class=p>},</span>
<a id=__codelineno-16-16 name=__codelineno-16-16 href=#__codelineno-16-16></a>    <span class=p>],</span>
<a id=__codelineno-16-17 name=__codelineno-16-17 href=#__codelineno-16-17></a>    <span class=s2>&quot;temperature&quot;</span><span class=p>:</span> <span class=mf>0.9</span><span class=p>,</span>
<a id=__codelineno-16-18 name=__codelineno-16-18 href=#__codelineno-16-18></a>    <span class=s2>&quot;timeout&quot;</span><span class=p>:</span> <span class=mi>300</span><span class=p>,</span>
<a id=__codelineno-16-19 name=__codelineno-16-19 href=#__codelineno-16-19></a><span class=p>}</span>
</code></pre></div> <h2 id=other-helpers-for-loading-a-config-list>Other helpers for loading a config list<a class=headerlink href=#other-helpers-for-loading-a-config-list title="Permanent link">#</a></h2> <ul> <li><a href=../../api-reference/autogen/oai/openai_utils><code>get_config_list</code></a>: Generates configurations for API calls, primarily from provided API keys.</li> <li><a href=../../api-reference/autogen/oai/openai_utils><code>config_list_openai_aoai</code></a>: Constructs a list of configurations using both Azure OpenAI and OpenAI endpoints, sourcing API keys from environment variables or local files.</li> <li><a href=../../api-reference/autogen/oai/openai_utils><code>config_list_from_models</code></a>: Creates configurations based on a provided list of models, useful when targeting specific models without manually specifying each configuration.</li> <li><a href=../../api-reference/autogen/oai/openai_utils><code>config_list_from_dotenv</code></a>: Constructs a configuration list from a <code>.env</code> file, offering a consolidated way to manage multiple API configurations and keys from a single file.</li> </ul> <p>See <a href=../../use-cases/notebooks/notebooks/config_loader_utility_functions>this notebook</a> for examples of using the above functions.</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class=timeago datetime=2025-03-12T01:15:21+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2025-03-12</span> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../conversation-patterns-deep-dive/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Conversation Patterns Deep Dive"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Conversation Patterns Deep Dive </div> </div> </a> <a href=../../models/amazon-bedrock/ class="md-footer__link md-footer__link--next" aria-label="Next: Amazon Bedrock"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Amazon Bedrock </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> &copy; 2025 <a href=https://ag2.ai/ target=_blank rel=noopener>ag2</a> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://discord.gg/pAbnFJrkgZ target=_blank rel=noopener title=discord.gg class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485 485 0 0 0 404.081 32.03a1.82 1.82 0 0 0-1.923.91 338 338 0 0 0-14.9 30.6 447.9 447.9 0 0 0-134.426 0 310 310 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.7 483.7 0 0 0-119.688 37.107 1.7 1.7 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.02 2.02 0 0 0 .765 1.375 487.7 487.7 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348 348 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321 321 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251 251 0 0 0 9.109-7.137 1.82 1.82 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.81 1.81 0 0 1 1.924.233 235 235 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.4 301.4 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391 391 0 0 0 30.014 48.815 1.86 1.86 0 0 0 2.063.7A486 486 0 0 0 610.7 405.729a1.88 1.88 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541M222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241m195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241"/></svg> </a> <a href=https://github.com/ag2ai/ag2 target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg> </a> <a href=https://x.com/ag2oss target=_blank rel=noopener title=x.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg> </a> <a href=https://www.youtube.com/@ag2ai target=_blank rel=noopener title=www.youtube.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg> </a> <a href=https://www.linkedin.com/company/ag2ai target=_blank rel=noopener title=www.linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../..", "features": ["search.suggest", "search.highlight", "navigation.tabs", "navigation.tabs.sticky", "navigation.indexes", "navigation.tracking", "navigation.prune", "navigation.top", "navigation.footer", "content.tabs.link", "content.code.copy", "content.code.annotate", "content.action.edit"], "search": "../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../../assets/javascripts/bundle.c8b220af.min.js></script> <script src=../../../../js/timeago.min.js></script> <script src=../../../../js/timeago_mkdocs_material.js></script> <script src=../../../../javascripts/extra.js></script> <script id=init-glightbox>const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>