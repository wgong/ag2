<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A programming framework for agentic AI"><meta name=author content="Chi Wang & Qingyun Wu"><link href=http://docs.ag2.ai/latest/docs/user-guide/advanced-concepts/swarm/deep-dive/ rel=canonical><link href=../../groupchat/resuming-group-chat/ rel=prev><link href=../nested-chat/ rel=next><link rel=icon href=../../../../../assets/img/favicon.svg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.7"><title>Swarm Deep-dive - AG2</title><link rel=stylesheet href=../../../../../assets/stylesheets/main.8608ea7d.min.css><link rel=stylesheet href=../../../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../../css/timeago.css><link rel=stylesheet href=../../../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../../../stylesheets/extra.aa8cf5.min.css><script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-2GN2KN2CE4"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-2GN2KN2CE4",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-2GN2KN2CE4",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><meta http-equiv=Cache-Control content="no-cache, no-store, must-revalidate"><meta property=og:type content=website><meta property=og:title content="AG2 - Swarm Deep-dive"><meta property=og:description content="A programming framework for agentic AI"><meta content=http://docs.ag2.ai/latest/docs/user-guide/advanced-concepts/swarm/deep-dive/ property=og:url><meta property=og:image content=https://opengraph.githubassets.com/1671805243.560327/ag2ai/ag2><meta property=og:image:type content=image/png><meta property=og:image:width content=1200><meta property=og:image:height content=630><meta name=twitter:card content=summary_large_image><meta name=twitter:title content="AG2 - Swarm Deep-dive"><meta name=twitter:description content="A programming framework for agentic AI"><meta name=twitter:image content=https://opengraph.githubassets.com/1671805243.560327/ag2ai/ag2><link href=../../../../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style><script src=../../../../../assets/javascripts/glightbox.min.js></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#components class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> You're viewing the <strong class=primary-text>work in progress</strong> version of the documentation. Please click <a rel=me href=http://docs.ag2.ai><strong>here</strong></a> for the latest. </div> </aside> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> <div class="md-banner__inner md-grid md-typeset"> You're not viewing the latest version. <a href=../../../../../..> <strong>Click here to go to latest.</strong> </a> </div> <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../../../../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script> </aside> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../../.. title=AG2 class="md-header__button md-logo" aria-label=AG2 data-md-component=logo> <img src=../../../../../assets/img/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> AG2 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Swarm Deep-dive </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=custom data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ag2ai/ag2 title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> ag2ai/ag2 </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../../.. class=md-tabs__link> Home </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../../basic-concepts/installing-ag2/ class=md-tabs__link> User Guide </a> </li> <li class=md-tabs__item> <a href=../../../../api-reference/autogen/AfterWork/ class=md-tabs__link> API References </a> </li> <li class=md-tabs__item> <a href=../../../../contributor-guide/contributing/ class=md-tabs__link> Contributor Guide </a> </li> <li class=md-tabs__item> <a href=../../../../faq/FAQ/ class=md-tabs__link> FAQs </a> </li> <li class=md-tabs__item> <a href=../../../../ecosystem/agentops/ class=md-tabs__link> Ecosystem </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../../.. title=AG2 class="md-nav__button md-logo" aria-label=AG2 data-md-component=logo> <img src=../../../../../assets/img/logo.svg alt=logo> </a> AG2 </label> <div class=md-nav__source> <a href=https://github.com/ag2ai/ag2 title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> ag2ai/ag2 </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../.. class=md-nav__link> <span class=md-ellipsis> Home </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> User Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> User Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../basic-concepts/installing-ag2/ class=md-nav__link> <span class=md-ellipsis> Basic Concepts </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2 checked> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> <span class=md-ellipsis> Advanced Concepts </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Advanced Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../rag/ class=md-nav__link> <span class=md-ellipsis> RAG </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../groupchat/groupchat/ class=md-nav__link> <span class=md-ellipsis> GroupChat </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_3 checked> <label class=md-nav__link for=__nav_2_2_3 id=__nav_2_2_3_label tabindex=0> <span class=md-ellipsis> Swarm </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_3_label aria-expanded=true> <label class=md-nav__title for=__nav_2_2_3> <span class="md-nav__icon md-icon"></span> Swarm </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Deep Dive </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Deep Dive </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#components class=md-nav__link> <span class=md-ellipsis> Components </span> </a> <nav class=md-nav aria-label=Components> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-agents class=md-nav__link> <span class=md-ellipsis> Create Agents </span> </a> </li> <li class=md-nav__item> <a href=#registering-handoffs-to-agents class=md-nav__link> <span class=md-ellipsis> Registering Handoffs to agents </span> </a> </li> <li class=md-nav__item> <a href=#registering-context-variable-based-handoffs-to-agents class=md-nav__link> <span class=md-ellipsis> Registering Context Variable-based Handoffs to agents </span> </a> </li> <li class=md-nav__item> <a href=#enablingdisabling-handoffs class=md-nav__link> <span class=md-ellipsis> Enabling/Disabling Handoffs </span> </a> </li> <li class=md-nav__item> <a href=#swarmresult class=md-nav__link> <span class=md-ellipsis> SwarmResult </span> </a> </li> <li class=md-nav__item> <a href=#update-agent-state-before-replying class=md-nav__link> <span class=md-ellipsis> Update Agent state before replying </span> </a> </li> <li class=md-nav__item> <a href=#initialize-swarmchat-with-initiate_swarm_chat-a_initiate_swarm_chat class=md-nav__link> <span class=md-ellipsis> Initialize SwarmChat with initiate_swarm_chat / a_initiate_swarm_chat </span> </a> </li> <li class=md-nav__item> <a href=#afterwork class=md-nav__link> <span class=md-ellipsis> AfterWork </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#qas class=md-nav__link> <span class=md-ellipsis> Q&amp;As </span> </a> <nav class=md-nav aria-label=Q&amp;As> <ul class=md-nav__list> <li class=md-nav__item> <a href=#how-are-context-variables-updated class=md-nav__link> <span class=md-ellipsis> How are context variables updated? </span> </a> </li> <li class=md-nav__item> <a href=#what-is-the-difference-between-oncondition-and-afterwork class=md-nav__link> <span class=md-ellipsis> What is the difference between OnCondition and AfterWork? </span> </a> </li> <li class=md-nav__item> <a href=#when-to-pass-in-a-user-agent class=md-nav__link> <span class=md-ellipsis> When to pass in a user agent? </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../nested-chat/ class=md-nav__link> <span class=md-ellipsis> Nested Chat </span> </a> </li> <li class=md-nav__item> <a href=../concept-code/ class=md-nav__link> <span class=md-ellipsis> Concept Code </span> </a> </li> <li class=md-nav__item> <a href=../use-case/ class=md-nav__link> <span class=md-ellipsis> Use Case </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../realtime-agent/ class=md-nav__link> <span class=md-ellipsis> RealtimeAgent </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../code-execution/ class=md-nav__link> <span class=md-ellipsis> Code Execution </span> </a> </li> <li class=md-nav__item> <a href=../../conversation-patterns-deep-dive/ class=md-nav__link> <span class=md-ellipsis> Conversation Patterns Deep Dive </span> </a> </li> <li class=md-nav__item> <a href=../../llm-configuration-deep-dive/ class=md-nav__link> <span class=md-ellipsis> LLM Configuration Deep Dive </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../models/amazon-bedrock/ class=md-nav__link> <span class=md-ellipsis> Model Providers </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../reference-agents/ class=md-nav__link> <span class=md-ellipsis> Reference Agents </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../reference-tools/ class=md-nav__link> <span class=md-ellipsis> Reference Tools </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../api-reference/autogen/AfterWork/ class=md-nav__link> <span class=md-ellipsis> API References </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../contributor-guide/contributing/ class=md-nav__link> <span class=md-ellipsis> Contributor Guide </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../faq/FAQ/ class=md-nav__link> <span class=md-ellipsis> FAQs </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../ecosystem/agentops/ class=md-nav__link> <span class=md-ellipsis> Ecosystem </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#components class=md-nav__link> <span class=md-ellipsis> Components </span> </a> <nav class=md-nav aria-label=Components> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-agents class=md-nav__link> <span class=md-ellipsis> Create Agents </span> </a> </li> <li class=md-nav__item> <a href=#registering-handoffs-to-agents class=md-nav__link> <span class=md-ellipsis> Registering Handoffs to agents </span> </a> </li> <li class=md-nav__item> <a href=#registering-context-variable-based-handoffs-to-agents class=md-nav__link> <span class=md-ellipsis> Registering Context Variable-based Handoffs to agents </span> </a> </li> <li class=md-nav__item> <a href=#enablingdisabling-handoffs class=md-nav__link> <span class=md-ellipsis> Enabling/Disabling Handoffs </span> </a> </li> <li class=md-nav__item> <a href=#swarmresult class=md-nav__link> <span class=md-ellipsis> SwarmResult </span> </a> </li> <li class=md-nav__item> <a href=#update-agent-state-before-replying class=md-nav__link> <span class=md-ellipsis> Update Agent state before replying </span> </a> </li> <li class=md-nav__item> <a href=#initialize-swarmchat-with-initiate_swarm_chat-a_initiate_swarm_chat class=md-nav__link> <span class=md-ellipsis> Initialize SwarmChat with initiate_swarm_chat / a_initiate_swarm_chat </span> </a> </li> <li class=md-nav__item> <a href=#afterwork class=md-nav__link> <span class=md-ellipsis> AfterWork </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#qas class=md-nav__link> <span class=md-ellipsis> Q&amp;As </span> </a> <nav class=md-nav aria-label=Q&amp;As> <ul class=md-nav__list> <li class=md-nav__item> <a href=#how-are-context-variables-updated class=md-nav__link> <span class=md-ellipsis> How are context variables updated? </span> </a> </li> <li class=md-nav__item> <a href=#what-is-the-difference-between-oncondition-and-afterwork class=md-nav__link> <span class=md-ellipsis> What is the difference between OnCondition and AfterWork? </span> </a> </li> <li class=md-nav__item> <a href=#when-to-pass-in-a-user-agent class=md-nav__link> <span class=md-ellipsis> When to pass in a user agent? </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/ag2ai/ag2/website/mkdocs/docs/docs/user-guide/advanced-concepts/swarm/deep-dive.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m7 14.94 6.06-6.06 2.06 2.06L9.06 17H7zM12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m4.7-10.65-1 1-2.05-2.05 1-1c.21-.22.56-.22.77 0l1.28 1.28c.22.21.22.56 0 .77M12 2a10 10 0 0 1 10 10 10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2"/></svg> </a> <h1>Deep Dive</h1> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>Changes at version &gt;= 0.7.4: 1. Deprecated: <code>SwarmAgent.register_hand_off</code> is no longer available. Instead, <a href=../../../api-reference/autogen/register_hand_off><code>register_hand_off</code></a> is now a standalone function. 2. Compatibility with <a href=../../../api-reference/autogen/ConversableAgent><code>ConversableAgent</code></a>: Now you can directly use any <a href=../../../api-reference/autogen/ConversableAgent><code>ConversableAgent</code></a>-based class, such as <a href=../../../api-reference/autogen/AssistantAgent><code>AssistantAgent</code></a> in a swarm chat. We recommend switching to <a href=../../../api-reference/autogen/AssistantAgent><code>AssistantAgent</code></a> since <code>SwarmAgent</code> might be deprecated in the future. 3. Deprecation Warning: <code>ON_CONDITION</code> and <code>AFTER_WORK</code> will be deprecated in the future. Please use <a href=../../../api-reference/autogen/OnCondition><code>OnCondition</code></a> and <a href=../../../api-reference/autogen/AfterWork><code>AfterWork</code></a> instead.</p> </div> <p>Swarms provide controllable flows between agents that are determined at the agent level. You define handoff, post-tool, and post-work transitions from one agent to another (or to end the swarm).</p> <p>In this Swarm deep-dive we run through all the components of AG2's Swarm. You can learn about Swarm's high-level concepts in the <a href=../../basic-concepts/swarm>Basic Concepts</a> section.</p> <h2 id=components>Components<a class=headerlink href=#components title="Permanent link">#</a></h2> <p>Here are the main components that are needed to create a swarm chat:</p> <ol> <li><strong>Create Agents</strong>: instantiate an <code>AssistantAgent</code> to be part of the swarm chat.<ul> <li>API Reference: <a href=../../../api-reference/autogen/AssistantAgent><code>AssistantAgent</code></a></li> </ul> </li> <li><strong>Register Handoffs</strong>: utilize <code>register_hand_off</code> to register <code>OnCondition</code>, <code>OnContextCondition</code>, and <code>AfterWork</code> handoffs.<ul> <li>API Reference: <a href=../../../api-reference/autogen/register_hand_off><code>register_hand_off</code></a>, <a href=../../../api-reference/autogen/OnCondition><code>OnCondition</code></a>, <a href=../../../api-reference/autogen/OnContextCondition><code>OnContextCondition</code></a>, <a href=../../../api-reference/autogen/AfterWork><code>AfterWork</code></a>, <a href=../../../api-reference/autogen/AfterWorkOption><code>AfterWorkOption</code></a>, <a href=../../../api-reference/autogen/SwarmResult><code>SwarmResult</code></a></li> </ul> </li> <li><strong>Update Agent State (Optional)</strong>: update an agent's state before replying.<ul> <li>API Reference: <a href=../../../api-reference/autogen/UpdateSystemMessage><code>UpdateSystemMessage</code></a></li> </ul> </li> <li><strong>Start Swarm Chat</strong>: initiate the swarm chat with <code>initiate_swarm_chat</code> or <code>a_initiate_swarm_chat</code> for asynchronous calls.<ul> <li>API Reference: <a href=../../../api-reference/autogen/initiate_swarm_chat><code>initiate_swarm_chat</code></a>, <a href=../../../api-reference/autogen/a_initiate_swarm_chat><code>a_initiate_swarm_chat</code></a></li> </ul> </li> </ol> <h3 id=create-agents>Create Agents<a class=headerlink href=#create-agents title="Permanent link">#</a></h3> <p>You can directly create <a href=../../../api-reference/autogen/AssistantAgent><code>AssistantAgent</code></a> to be used in a swarm chat. Instead of registering functions one by one, you can pass in a list of functions when creating your agent, <code>AssistantAgent(functions=[func1, ...])</code>. These functions will be converted to schemas to be passed to the LLMs, and you don't need to worry about registering the functions for execution as the swarm handles that automatically.</p> <p><strong>Notes for creating the function calls</strong> (<em>Caution</em>: The notes below only apply to functions that will swarm chats with <a href=../../../api-reference/autogen/initiate_swarm_chat><code>initiate_swarm_chat</code></a> or <a href=../../../api-reference/autogen/a_initiate_swarm_chat><code>a_initiate_swarm_chat</code></a> - You can pass back a <a href=../../../api-reference/autogen/SwarmResult><code>SwarmResult</code></a> object whereby you can return a value, the next agent to call, and update context variables at the same time. - For input arguments, you must define the type of the argument, otherwise, the registration will fail (e.g. <code>arg_name: str</code>). - If your function requires access or modification of the context variables, you must pass in <code>context_variables: dict</code> as one argument. This argument will not be visible to the LLM (removed when registering the function schema). But when called, the global context variables will be passed in by the swarm chat. If you are making changes to the context variables you must return it in the <a href=../../../api-reference/autogen/SwarmResult><code>SwarmResult</code></a> so it can be updated. - The docstring of the function will be used as the prompt. So make sure to write a clear description. - The function name will be used as the tool name.</p> <h3 id=registering-handoffs-to-agents>Registering Handoffs to agents<a class=headerlink href=#registering-handoffs-to-agents title="Permanent link">#</a></h3> <p>While you can create functions to decide who the next agent to call is, we provide a quick way to register the handoff using <a href=../../../api-reference/autogen/OnCondition><code>OnCondition</code></a>. Internally, a transition function is created and added to the LLM configuration directly.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=kn>from</span><span class=w> </span><span class=nn>autogen</span><span class=w> </span><span class=kn>import</span> <span class=n>AssistantAgent</span><span class=p>,</span> <span class=n>OnCondition</span><span class=p>,</span> <span class=n>register_hand_off</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=c1># llm_config = ...</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=n>agent_2</span> <span class=o>=</span> <span class=n>AssistantAgent</span><span class=p>(</span><span class=s2>&quot;agent_2&quot;</span><span class=p>,</span> <span class=n>llm_config</span><span class=o>=</span><span class=n>llm_config</span><span class=p>)</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=n>agent_3</span> <span class=o>=</span> <span class=n>AssistantAgent</span><span class=p>(</span><span class=s2>&quot;agent_3&quot;</span><span class=p>,</span> <span class=n>llm_config</span><span class=o>=</span><span class=n>llm_config</span><span class=p>)</span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=c1># --------Option 1---------</span>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=n>agent_1</span> <span class=o>=</span> <span class=n>AssistantAgent</span><span class=p>(</span><span class=s2>&quot;agent_1&quot;</span><span class=p>,</span> <span class=n>llm_config</span><span class=o>=</span><span class=n>llm_config</span><span class=p>)</span>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=c1># Register the handoff</span>
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=n>register_hand_off</span><span class=p>(</span>
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>    <span class=n>agent</span> <span class=o>=</span> <span class=n>agent_1</span><span class=p>,</span>
<a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a>    <span class=n>hand_to</span><span class=o>=</span><span class=p>[</span>
<a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a>        <span class=n>OnCondition</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>agent_2</span><span class=p>,</span> <span class=n>condition</span><span class=o>=</span><span class=s2>&quot;condition_1&quot;</span><span class=p>),</span>
<a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a>        <span class=n>OnCondition</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>agent_3</span><span class=p>,</span> <span class=n>condition</span><span class=o>=</span><span class=s2>&quot;condition_2&quot;</span><span class=p>),</span>
<a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a>    <span class=p>]</span>
<a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a><span class=p>)</span>
<a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a>
<a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a><span class=c1># --------Option 2---------</span>
<a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a><span class=c1># This is equivalent to:</span>
<a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a><span class=k>def</span><span class=w> </span><span class=nf>transfer_to_agent_2</span><span class=p>():</span>
<a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;condition_1&quot;&quot;&quot;</span>
<a id=__codelineno-0-21 name=__codelineno-0-21 href=#__codelineno-0-21></a>    <span class=k>return</span> <span class=n>agent_2</span>
<a id=__codelineno-0-22 name=__codelineno-0-22 href=#__codelineno-0-22></a>
<a id=__codelineno-0-23 name=__codelineno-0-23 href=#__codelineno-0-23></a><span class=k>def</span><span class=w> </span><span class=nf>transfer_to_agent_3</span><span class=p>():</span>
<a id=__codelineno-0-24 name=__codelineno-0-24 href=#__codelineno-0-24></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;condition_2&quot;&quot;&quot;</span>
<a id=__codelineno-0-25 name=__codelineno-0-25 href=#__codelineno-0-25></a>    <span class=k>return</span> <span class=n>agent_3</span>
<a id=__codelineno-0-26 name=__codelineno-0-26 href=#__codelineno-0-26></a>
<a id=__codelineno-0-27 name=__codelineno-0-27 href=#__codelineno-0-27></a><span class=n>agent_1</span> <span class=o>=</span> <span class=n>AssistantAgent</span><span class=p>(</span><span class=s2>&quot;agent_1&quot;</span><span class=p>,</span> <span class=n>llm_config</span><span class=o>=</span><span class=n>llm_config</span><span class=p>,</span> <span class=n>functions</span><span class=o>=</span><span class=p>[</span><span class=n>transfer_to_agent_2</span><span class=p>,</span> <span class=n>transfer_to_agent_3</span><span class=p>])</span>
</code></pre></div> <h3 id=registering-context-variable-based-handoffs-to-agents>Registering Context Variable-based Handoffs to agents<a class=headerlink href=#registering-context-variable-based-handoffs-to-agents title="Permanent link">#</a></h3> <p>In the previous section you saw how agent handoffs were created using <a href=../../../api-reference/autogen/OnCondition><code>OnCondition</code></a>. These handoffs utilize the agent's LLM and tool calling to determine the next agent. However, if you are able to use the swarm's context variables in an expression, you can create a context variable-based handoff, using <a href=../../../api-reference/autogen/OnContextCondition><code>OnContextCondition</code></a> and <a href=../../../api-reference/autogen/ContextExpression><code>ContextExpression</code></a>, that does not require an LLM.</p> <p>The syntax for creating a <a href=../../../api-reference/autogen/OnContextCondition><code>OnContextCondition</code></a> is very similar to <a href=../../../api-reference/autogen/OnCondition><code>OnCondition</code></a>, with the exception being the condition is a <a href=../../../api-reference/autogen/ContextExpression><code>ContextExpression</code></a>.</p> <p><a href=../../../api-reference/autogen/ContextExpression><code>ContextExpression</code></a> is a powerful expression evaluator that allows you to create complex expressions using context variable keys: - Variable references use <code>${var_name}</code> syntax: <code>${logged_in}</code>, <code>${attempts}</code> - String literals can be used, e.g. <code>${customer_tier} == 'gold'</code> - Numeric comparisons, e.g. <code>${budget} &gt;= 50</code> - Supports a wide range of operators: - Logical: <code>not, !, and, &amp;, or, |</code> - Comparison: <code>&gt;, &lt;, &gt;=, &lt;=, ==, !=</code> - Parentheses can be used for grouping - Supports <code>len(${var_name})</code>: Gets the length of a list, string, or other collection - Examples: - <code>not ${logged_in} and ${is_admin} or ${guest_checkout}</code> - <code>!${logged_in} &amp; ${is_admin} | ${guest_checkout}</code> - <code>${attempts} &gt; 3 | ${is_admin} == True</code> - <code>len(${search_results}) &gt; 5</code></p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=n>register_hand_off</span><span class=p>(</span>
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>    <span class=n>agent</span> <span class=o>=</span> <span class=n>agent_1</span><span class=p>,</span>
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>    <span class=n>hand_to</span><span class=o>=</span><span class=p>[</span>
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>        <span class=n>OnContextCondition</span><span class=p>(</span>
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>            <span class=n>target</span><span class=o>=</span><span class=n>agent_2</span><span class=p>,</span>
<a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>            <span class=n>condition</span><span class=o>=</span><span class=n>ContextExpression</span><span class=p>(</span><span class=s2>&quot;($</span><span class=si>{account_level}</span><span class=s2> &gt; 2 and $</span><span class=si>{budget_remaining}</span><span class=s2> &gt; 0) or $</span><span class=si>{account_tier}</span><span class=s2> == &#39;Gold&#39; or len($</span><span class=si>{order_count}</span><span class=s2>) &gt; 10&quot;</span><span class=p>),</span>
<a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a>            <span class=n>available</span><span class=o>=</span><span class=s2>&quot;logged_in&quot;</span><span class=p>),</span>
<a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a>        <span class=n>OnCondition</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>agent_3</span><span class=p>,</span> <span class=n>condition</span><span class=o>=</span><span class=s2>&quot;condition_2&quot;</span><span class=p>),</span> <span class=c1># LLM-based, evaluated after OnContextCondition&#39;s</span>
<a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a>    <span class=p>]</span>
<a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a><span class=p>)</span>
</code></pre></div> <p>Notes: - If you pass a string into the <code>condition</code> parameter of <a href=../../../api-reference/autogen/OnContextCondition><code>OnContextCondition</code></a> it is assumed to be a context variable key and will be put into a <a href=../../../api-reference/autogen/ContextExpression><code>ContextExpression</code></a>. - <a href=../../../api-reference/autogen/OnContextCondition><code>OnContextCondition</code></a>'s are evaluated before <a href=../../../api-reference/autogen/OnCondition><code>OnCondition</code></a> handoffs.</p> <h3 id=enablingdisabling-handoffs>Enabling/Disabling Handoffs<a class=headerlink href=#enablingdisabling-handoffs title="Permanent link">#</a></h3> <p>You can enable and disable <a href=../../../api-reference/autogen/OnCondition><code>OnCondition</code></a>/<a href=../../../api-reference/autogen/OnContextCondition><code>OnContextCondition</code></a> handoffs using their <code>available</code> parameter.</p> <p>This can be a useful mechanism for ensuring handoffs are only evaluated when applicable, such as only when a user is authenticated.</p> <p>The <code>available</code> parameter can take: | Type | Description | | --- | --- | | String | Will look up the value of the context variable with that name, which should be a bool, to determine whether it should include this condition. | | ContextExpression | Will evaluate the logical expression against the context variables (see previous section for examples) | | Callable | <code>def my_available_func(agent: ConversableAgent, messages: list[Dict[str, Any]]) -&gt; bool</code> |</p> <p>In the following example the handoff will only be available to <code>agent_1</code> when the swarm context variable <code>has_plan</code> is <code>True</code>.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=n>register_hand_off</span><span class=p>(</span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>    <span class=n>agent</span> <span class=o>=</span> <span class=n>agent_1</span><span class=p>,</span>
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a>    <span class=n>hand_to</span><span class=o>=</span><span class=p>[</span>
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a>        <span class=n>OnCondition</span><span class=p>(</span>
<a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>            <span class=n>target</span><span class=o>=</span><span class=n>agent_2</span><span class=p>,</span>
<a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a>            <span class=n>condition</span><span class=o>=</span><span class=s2>&quot;Transfer to the reviewer to evaluate the plan.&quot;</span><span class=p>,</span>
<a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a>            <span class=n>available</span><span class=o>=</span><span class=s2>&quot;has_plan&quot;</span><span class=p>),</span>
<a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a>    <span class=p>]</span>
<a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a><span class=p>)</span>
</code></pre></div> <h3 id=swarmresult>SwarmResult<a class=headerlink href=#swarmresult title="Permanent link">#</a></h3> <p>When tools are called, a <a href=../../../api-reference/autogen/SwarmResult><code>SwarmResult</code></a> can be returned and that can be used to specify the next agent to speak through the <a href=../../../api-reference/autogen/SwarmResult><code>SwarmResult</code></a>'s <code>agent</code> parameter.</p> <p>The <code>agent</code> property can be an agent object, an agent's name (string), an <a href=../../../api-reference/autogen/AfterWorkOption><code>AfterWorkOption</code></a>, or <code>None</code>. - If it is an agent object or agent name, that agent will be the next speaker. - If <code>None</code> it will return to the previous speaker. - If it is an <a href=../../../api-reference/autogen/AfterWorkOption><code>AfterWorkOption</code></a>, it will follow the rules noted in the previous section.</p> <p>By using an <a href=../../../api-reference/autogen/AfterWorkOption><code>AfterWorkOption</code></a> you have additional flexibility, such as terminating the swarm at this point or transferring to the swarm's user agent.</p> <h3 id=update-agent-state-before-replying>Update Agent state before replying<a class=headerlink href=#update-agent-state-before-replying title="Permanent link">#</a></h3> <p>It can be useful to update an agent's state before they reply. For example, you can use an agent's context variables in their system message to keep it current with the state of the workflow.</p> <p>When initialising an agent use the <code>update_agent_state_before_reply</code> parameter to register updates that run after the agent is selected, but before they reply.</p> <p><code>update_agent_state_before_reply</code> takes a list of any combination of the following (executing them in the provided order):</p> <ul> <li><a href=../../../api-reference/autogen/UpdateSystemMessage><code>UpdateSystemMessage</code></a> provides a simple way to update the agent's system message via an f-string that substitutes the values of context variables, or a <code>Callable</code> that returns a string</li> <li>Callable with two parameters of type <a href=../../../api-reference/autogen/ConversableAgent><code>ConversableAgent</code></a> for the agent and <code>List[Dict[str Any]]</code> for the messages, and does not return a value</li> </ul> <p>Below is an example of these options.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=c1># Creates a system message string</span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=k>def</span><span class=w> </span><span class=nf>create_system_prompt_function</span><span class=p>(</span><span class=n>my_agent</span><span class=p>:</span> <span class=n>ConversableAgent</span><span class=p>,</span> <span class=n>messages</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>Dict</span><span class=p>[]])</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a> <span class=n>preferred_name</span> <span class=o>=</span> <span class=n>my_agent</span><span class=o>.</span><span class=n>get_context</span><span class=p>(</span><span class=s2>&quot;preferred_name&quot;</span><span class=p>,</span> <span class=s2>&quot;(name not provided)&quot;</span><span class=p>)</span>
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a>
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>    <span class=c1># Note that the returned string will be treated like an f-string using the context variables</span>
<a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a>    <span class=k>return</span> <span class=s2>&quot;You are a customer service representative helping a customer named &quot;</span>
<a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a> <span class=o>+</span> <span class=n>preferred_name</span>
<a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a> <span class=o>+</span> <span class=s2>&quot; and their passport number is &#39;</span><span class=si>{passport_number}</span><span class=s2>&#39;.&quot;</span>
<a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a>
<a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a><span class=c1># Function to update an Agent&#39;s state</span>
<a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a><span class=k>def</span><span class=w> </span><span class=nf>my_callable_state_update_function</span><span class=p>(</span><span class=n>my_agent</span><span class=p>:</span> <span class=n>ConversableAgent</span><span class=p>,</span> <span class=n>messages</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>Dict</span><span class=p>[]])</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a> <span class=n>agent</span><span class=o>.</span><span class=n>set_context</span><span class=p>(</span><span class=s2>&quot;context_key&quot;</span><span class=p>,</span> <span class=mi>43</span><span class=p>)</span>
<a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a> <span class=n>agent</span><span class=o>.</span><span class=n>update_system_message</span><span class=p>(</span><span class=s2>&quot;You are a customer service representative helping customer ID &quot;</span> <span class=o>+</span> <span class=n>agent</span><span class=o>.</span><span class=n>get_context</span><span class=p>(</span><span class=s2>&quot;context_key&quot;</span><span class=p>))</span>
<a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a>
<a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a><span class=c1># Create the AssistantAgent and set agent updates</span>
<a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a><span class=n>customer_service</span> <span class=o>=</span> <span class=n>AssistantAgent</span><span class=p>(</span>
<a id=__codelineno-3-17 name=__codelineno-3-17 href=#__codelineno-3-17></a>    <span class=n>name</span><span class=o>=</span><span class=s2>&quot;CustomerServiceRep&quot;</span><span class=p>,</span>
<a id=__codelineno-3-18 name=__codelineno-3-18 href=#__codelineno-3-18></a>    <span class=n>system_message</span><span class=o>=</span><span class=s2>&quot;You are a customer service representative.&quot;</span><span class=p>,</span>
<a id=__codelineno-3-19 name=__codelineno-3-19 href=#__codelineno-3-19></a>    <span class=n>update_agent_state_before_reply</span><span class=o>=</span><span class=p>[</span>
<a id=__codelineno-3-20 name=__codelineno-3-20 href=#__codelineno-3-20></a> <span class=n>UpdateSystemMessage</span><span class=p>(</span><span class=s2>&quot;You are a customer service representative. Quote passport number &#39;</span><span class=si>{passport_number}</span><span class=s2>&#39;&quot;</span><span class=p>),</span>
<a id=__codelineno-3-21 name=__codelineno-3-21 href=#__codelineno-3-21></a> <span class=n>UpdateSystemMessage</span><span class=p>(</span><span class=n>create_system_prompt_function</span><span class=p>),</span>
<a id=__codelineno-3-22 name=__codelineno-3-22 href=#__codelineno-3-22></a> <span class=n>my_callable_state_update_function</span><span class=p>]</span>
<a id=__codelineno-3-23 name=__codelineno-3-23 href=#__codelineno-3-23></a> <span class=o>...</span>
<a id=__codelineno-3-24 name=__codelineno-3-24 href=#__codelineno-3-24></a><span class=p>)</span>
</code></pre></div> <h3 id=initialize-swarmchat-with-initiate_swarm_chat-a_initiate_swarm_chat>Initialize SwarmChat with <code>initiate_swarm_chat</code> / <code>a_initiate_swarm_chat</code><a class=headerlink href=#initialize-swarmchat-with-initiate_swarm_chat-a_initiate_swarm_chat title="Permanent link">#</a></h3> <p>After a set of swarm agents is created, you can initiate a swarm chat by calling <a href=../../../api-reference/autogen/initiate_swarm_chat><code>initiate_swarm_chat</code></a> (or <a href=../../../api-reference/autogen/a_initiate_swarm_chat><code>a_initiate_swarm_chat</code></a> for an asynchronous version).</p> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=n>chat_history</span><span class=p>,</span> <span class=n>context_variables</span><span class=p>,</span> <span class=n>last_active_agent</span> <span class=o>=</span> <span class=n>initiate_swarm_chat</span><span class=p>(</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>    <span class=n>initial_agent</span><span class=o>=</span><span class=n>agent_1</span><span class=p>,</span> <span class=c1># the first agent to start the chat</span>
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>    <span class=n>agents</span><span class=o>=</span><span class=p>[</span><span class=n>agent_1</span><span class=p>,</span> <span class=n>agent_2</span><span class=p>,</span> <span class=n>agent_3</span><span class=p>],</span> <span class=c1># a list of agents</span>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>    <span class=n>messages</span><span class=o>=</span><span class=p>[{</span><span class=s2>&quot;role&quot;</span><span class=p>:</span> <span class=s2>&quot;user&quot;</span><span class=p>,</span> <span class=s2>&quot;content&quot;</span><span class=p>:</span> <span class=s2>&quot;Hello&quot;</span><span class=p>}],</span> <span class=c1># a list of messages to start the chat, you can also pass in one string</span>
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>    <span class=n>user_agent</span><span class=o>=</span><span class=n>user_agent</span><span class=p>,</span> <span class=c1># optional, if you want to use your own user agent</span>
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>    <span class=n>context_variables</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;key&quot;</span><span class=p>:</span> <span class=s2>&quot;value&quot;</span><span class=p>}</span> <span class=c1># optional, initial context variables</span>
<a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=p>)</span>
</code></pre></div> <p>How we handle the <code>messages</code> parameter: - Case 1: If you pass in one single message - If there is a <code>name</code> in that message, we will assume this message is from that agent. The name must match an agent in the swarm. - If there is no name: - 1. User agent passed in: we assume this message is from the user agent. - 2. No user agent passed in: we will create a temporary user agent just to start the chat. - Case 2: We will use the <a href=../resuming-group-chat>Resume GroupChat</a> feature to resume the chat. The <code>name</code> fields in these messages must match the names of the agents you passed in.</p> <h3 id=afterwork>AfterWork<a class=headerlink href=#afterwork title="Permanent link">#</a></h3> <p>When the active agent's response doesn't suggest a tool call or handoff, the chat will terminate by default. However, you can register an <a href=../../../api-reference/autogen/AfterWork><code>AfterWork</code></a> handoff to control what to do next. You can register these <a href=../../../api-reference/autogen/AfterWork><code>AfterWork</code></a> handoffs at the agent level and also the swarm level (through the <code>after_work</code> parameter on <a href=../../../api-reference/autogen/initiate_swarm_chat><code>initiate_swarm_chat</code></a>). The agent level takes precedence over the swarm level.</p> <p>The <a href=../../../api-reference/autogen/AfterWork><code>AfterWork</code></a> takes a single parameter and this can be an agent, an agent's name, an <a href=../../../api-reference/autogen/AfterWorkOption><code>AfterWorkOption</code></a>, or a callable function.</p> <p>The <a href=../../../api-reference/autogen/AfterWorkOption><code>AfterWorkOption</code></a> options are: - <code>TERMINATE</code>: Terminate the chat - <code>STAY</code>: Stay at the current agent - <code>REVERT_TO_USER</code>: Revert to the user agent. Only if a user agent is passed in when initializing. (See below for more details) - <code>SWARM_MANAGER</code>: Use the internal group chat's <code>auto</code> speaker selection method</p> <p>The callable function signature is: <code>def my_after_work_func(last_speaker: ConversableAgent, messages: List[Dict[str, Any]], groupchat: GroupChat) -&gt; Union[AfterWorkOption, ConversableAgent, str]:</code></p> <p>Note: there should only be one <a href=../../../api-reference/autogen/AfterWork><code>AfterWork</code></a>, if your requirement is more complex, use a Callable as the parameter.</p> <p>Here are examples of registering AfterWork handoffs:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=c1># Register the handoff to an agent</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=n>register_handoff</span><span class=p>(</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>    <span class=n>agent</span><span class=o>=</span><span class=n>agent_1</span><span class=p>,</span>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a>    <span class=n>hand_to</span><span class=o>=</span><span class=p>[</span>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a> <span class=n>OnCondition</span><span class=p>(</span><span class=o>...</span><span class=p>),</span>
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a> <span class=n>AfterWork</span><span class=p>(</span><span class=n>agent_4</span><span class=p>)</span> <span class=c1># Fallback to agent_4 if no OnCondition handoff is called</span>
<a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a> <span class=p>]</span>
<a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=p>)</span>
<a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a>
<a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a><span class=c1># Register the handoff to an AfterWorkOption</span>
<a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a><span class=n>register_handoff</span><span class=p>(</span>
<a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a>    <span class=n>agent</span><span class=o>=</span><span class=n>agent_2</span><span class=p>,</span>
<a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a>    <span class=n>hand_to</span><span class=o>=</span><span class=p>[</span><span class=n>AfterWork</span><span class=p>(</span><span class=n>AfterWorkOption</span><span class=o>.</span><span class=n>TERMINATE</span><span class=p>)]</span> <span class=c1># Terminate the chat if no handoff is suggested</span>
<a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a><span class=p>)</span>
<a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a>
<a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a><span class=k>def</span><span class=w> </span><span class=nf>my_after_work_func</span><span class=p>(</span><span class=n>last_speaker</span><span class=p>:</span> <span class=n>AssistantAgent</span><span class=p>,</span> <span class=n>messages</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]],</span> <span class=n>groupchat</span><span class=p>:</span> <span class=n>GroupChat</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Union</span><span class=p>[</span><span class=n>AfterWorkOption</span><span class=p>,</span> <span class=n>AssistantAgent</span><span class=p>,</span> <span class=nb>str</span><span class=p>]:</span>
<a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a>    <span class=k>if</span> <span class=n>last_speaker</span><span class=o>.</span><span class=n>get_context</span><span class=p>(</span><span class=s2>&quot;agent_1_done&quot;</span><span class=p>):</span>
<a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a>        <span class=k>return</span> <span class=n>agent_2</span>
<a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a>    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-5-20 name=__codelineno-5-20 href=#__codelineno-5-20></a>        <span class=k>return</span> <span class=n>AfterWorkOption</span><span class=o>.</span><span class=n>TERMINATE</span>
<a id=__codelineno-5-21 name=__codelineno-5-21 href=#__codelineno-5-21></a>
<a id=__codelineno-5-22 name=__codelineno-5-22 href=#__codelineno-5-22></a><span class=c1># Register the handoff to a function that will return an agent or AfterWorkOption</span>
<a id=__codelineno-5-23 name=__codelineno-5-23 href=#__codelineno-5-23></a><span class=n>agent_3</span><span class=o>.</span><span class=n>handoff</span><span class=p>(</span><span class=n>hand_to</span><span class=o>=</span><span class=p>[</span><span class=n>AfterWork</span><span class=p>(</span><span class=n>my_after_work_func</span><span class=p>)])</span>
<a id=__codelineno-5-24 name=__codelineno-5-24 href=#__codelineno-5-24></a><span class=n>register_handoff</span><span class=p>(</span><span class=n>agent_3</span><span class=p>,</span> <span class=n>hand_to</span><span class=o>=</span><span class=p>[</span><span class=n>AfterWork</span><span class=p>(</span><span class=n>my_after_work_func</span><span class=p>)])</span>
<a id=__codelineno-5-25 name=__codelineno-5-25 href=#__codelineno-5-25></a>
<a id=__codelineno-5-26 name=__codelineno-5-26 href=#__codelineno-5-26></a><span class=c1># Register the swarm level AfterWork that becomes the default for agents that don&#39;t have one specified</span>
<a id=__codelineno-5-27 name=__codelineno-5-27 href=#__codelineno-5-27></a><span class=n>chat_history</span><span class=p>,</span> <span class=n>context_variables</span><span class=p>,</span> <span class=n>last_active_agent</span> <span class=o>=</span> <span class=n>initiate_swarm_chat</span><span class=p>(</span>
<a id=__codelineno-5-28 name=__codelineno-5-28 href=#__codelineno-5-28></a> <span class=o>...</span>
<a id=__codelineno-5-29 name=__codelineno-5-29 href=#__codelineno-5-29></a>    <span class=n>after_work</span><span class=o>=</span><span class=n>AfterWorkOption</span><span class=o>.</span><span class=n>TERMINATE</span> <span class=c1># Or an agent or Callable</span>
<a id=__codelineno-5-30 name=__codelineno-5-30 href=#__codelineno-5-30></a><span class=p>)</span>
</code></pre></div> <h2 id=qas>Q&amp;As<a class=headerlink href=#qas title="Permanent link">#</a></h2> <h3 id=how-are-context-variables-updated>How are context variables updated?<a class=headerlink href=#how-are-context-variables-updated title="Permanent link">#</a></h3> <p>In a swarm, the context variables are shared amongst the swarm's agents. As context variables are available at the agent level, you can use the context variable getters/setters (<a href=../../../api-reference/autogen/ConversableAgent#get-context><code>get_context</code></a>, <a href=../../../api-reference/autogen/ConversableAgent#set-context><code>set_context</code></a>) on the agent to view and change the shared context variables. If you're working with a function that returns a <a href=../../../api-reference/autogen/SwarmResult><code>SwarmResult</code></a> you should update the passed-in context variables and return it in the <a href=../../../api-reference/autogen/SwarmResult><code>SwarmResult</code></a> to ensure the shared context is updated.</p> <h3 id=what-is-the-difference-between-oncondition-and-afterwork>What is the difference between OnCondition and AfterWork?<a class=headerlink href=#what-is-the-difference-between-oncondition-and-afterwork title="Permanent link">#</a></h3> <p>When registering an <a href=../../../api-reference/autogen/OnCondition><code>OnCondition</code></a> handoff, we are creating a function schema to be passed to the LLM. The LLM will decide whether to call this function.</p> <p>When registering an <a href=../../../api-reference/autogen/AfterWork><code>AfterWork</code></a> handoff, we are defining the fallback mechanism when no tool calls are suggested. This is a higher level of control from the swarm chat level.</p> <h3 id=when-to-pass-in-a-user-agent>When to pass in a user agent?<a class=headerlink href=#when-to-pass-in-a-user-agent title="Permanent link">#</a></h3> <p>If your application requires interactions with the user, you can pass in a user agent using the <code>user_agent</code> parameter of <a href=../../../api-reference/autogen/initiate_swarm_chat><code>initiate_swarm_chat</code></a>. This means that you don't need to write an outer loop to accept user inputs and return to the swarm.</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class=timeago datetime=2025-03-12T01:15:22+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2025-03-12</span> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../../groupchat/resuming-group-chat/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Resuming Group Chat"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Resuming Group Chat </div> </div> </a> <a href=../nested-chat/ class="md-footer__link md-footer__link--next" aria-label="Next: Nested Chat"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Nested Chat </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> &copy; 2025 <a href=https://ag2.ai/ target=_blank rel=noopener>ag2</a> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://discord.gg/pAbnFJrkgZ target=_blank rel=noopener title=discord.gg class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485 485 0 0 0 404.081 32.03a1.82 1.82 0 0 0-1.923.91 338 338 0 0 0-14.9 30.6 447.9 447.9 0 0 0-134.426 0 310 310 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.7 483.7 0 0 0-119.688 37.107 1.7 1.7 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.02 2.02 0 0 0 .765 1.375 487.7 487.7 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348 348 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321 321 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251 251 0 0 0 9.109-7.137 1.82 1.82 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.81 1.81 0 0 1 1.924.233 235 235 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.4 301.4 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391 391 0 0 0 30.014 48.815 1.86 1.86 0 0 0 2.063.7A486 486 0 0 0 610.7 405.729a1.88 1.88 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541M222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241m195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241"/></svg> </a> <a href=https://github.com/ag2ai/ag2 target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg> </a> <a href=https://x.com/ag2oss target=_blank rel=noopener title=x.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg> </a> <a href=https://www.youtube.com/@ag2ai target=_blank rel=noopener title=www.youtube.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg> </a> <a href=https://www.linkedin.com/company/ag2ai target=_blank rel=noopener title=www.linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../../..", "features": ["search.suggest", "search.highlight", "navigation.tabs", "navigation.tabs.sticky", "navigation.indexes", "navigation.tracking", "navigation.prune", "navigation.top", "navigation.footer", "content.tabs.link", "content.code.copy", "content.code.annotate", "content.action.edit"], "search": "../../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../../../assets/javascripts/bundle.c8b220af.min.js></script> <script src=../../../../../js/timeago.min.js></script> <script src=../../../../../js/timeago_mkdocs_material.js></script> <script src=../../../../../javascripts/extra.js></script> <script id=init-glightbox>const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>